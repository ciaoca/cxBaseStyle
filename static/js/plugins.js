/**
 * 该文件只保存各种插件，实际调用请写在其他文件中
 *
 * 目录
 * WebApp
 * FastClick
 * Purl
 * art-template           模板引擎
 * cxCalendar             日期选择器
 * cxDialog               对话框
 * cxSelect               联动下拉框
 * cxValidation           表单验证
 * Day.js                 日期处理
 * Notyf                  通知消息
 * Swipe                  轮播图
 * QRCode                 生成二维码
 * Exif                   获取照片信息
 * MegaPixImage           图片裁剪
 * ------------------------------ */

/**
 * webapp.js
 * 
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxm
 * @license Released under the MIT license
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.WebApp=e()}("undefined"!=typeof self?self:this,function(){"use strict";function t(){return this.init.apply(this,arguments)}return t.prototype.init=function(t){var e=this;e.options={prefix:"",hashTag:"!"},e.dom={},e.dom.loading=document.createElement("div"),e.dom.loading.setAttribute("id","app_loading"),e.panelCount=0},t.prototype.setOptions=function(t){Object.assign(this.options,t)},t.prototype.getDom=function(t,e){var o=this;let r;return o.isJquery(t)||o.isZepto(t)?e?t:t[0]:(o.isString(t)&&t.length?r=document.getElementById(t):o.isElement(t)&&(r=t),e&&o.isElement(r)&&(r=$(r)),r)},t.prototype.closest=function(t,e){const o=t.matches||t.webkitMatchesSelector;for(;t;){if(o.call(t,e))return t;t=t.parentElement}return null},t.prototype.isIos=function(){return/(iphone|ipad|ipod|ios)/i.test(navigator.userAgent.toLowerCase())},t.prototype.isElement=function(t){return!(!t||"function"!=typeof HTMLElement&&"object"!=typeof HTMLElement||!(t instanceof HTMLElement))||!(!t||!t.nodeType||1!==t.nodeType)},t.prototype.isJquery=function(t){return!!(t&&t.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&t instanceof jQuery)},t.prototype.isZepto=function(t){return!(!t||!t.length||"function"!=typeof Zepto&&"object"!=typeof Zepto||!Zepto.zepto.isZ(t))},t.prototype.isString=function(t){return"string"==typeof t},t.prototype.isNumber=function(t){return!("number"!=typeof t||!isFinite(t))},t.prototype.isBoolean=function(t){return"boolean"==typeof t},t.prototype.isFunction=function(t){return"function"==typeof t},t.prototype.isArray=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},t.prototype.isNull=function(t){return"[object Null]"===Object.prototype.toString.call(t)},t.prototype.isUndefined=function(t){return"[object Undefined]"===Object.prototype.toString.call(t)},t.prototype.isObject=function(t){return!("object"!=typeof t||t.nodeType||null!=t&&t===t.window)&&!(t.constructor&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))},t.prototype.isDate=function(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)},t.prototype.isLeapYear=function(t){return!!this.isNumber(t)&&!(t%(t%100?4:400))},t.prototype.isRegExp=function(t){return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)},t.prototype.isError=function(t){return t instanceof Error},t.prototype.isJson=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},t.prototype.isHidden=function(t){if(this.isElement(t)){const e=window.getComputedStyle(t);return"none"===e.getPropertyValue("display")||"hidden"===e.getPropertyValue("visibility")||0==e.getPropertyValue("opacity")||0==e.getPropertyValue("width")&&0==e.getPropertyValue("height")}return!0},t.prototype.isVisible=function(t){return!this.isHidden(t)},t.prototype.setStorage=function(t,e){this.isString(t)&&t.length&&sessionStorage.setItem(this.options.prefix+t,JSON.stringify(e))},t.prototype.getStorage=function(e){if(!this.isString(e)||!e.length)return null;e=sessionStorage.getItem(this.options.prefix+e);try{return JSON.parse(e)}catch(t){return e}},t.prototype.removeStorage=function(t){this.isString(t)&&t.length&&sessionStorage.removeItem(this.options.prefix+t)},t.prototype.clearStorage=function(){const t=sessionStorage;var e,o=this.options.prefix.length;for(e in t)e.slice(0,o)===this.options.prefix&&t.removeItem(e)},t.prototype.setLocalStorage=function(t,e){this.isString(t)&&t.length&&localStorage.setItem(this.options.prefix+t,JSON.stringify(e))},t.prototype.getLocalStorage=function(e){if(!this.isString(e)||!e.length)return null;e=localStorage.getItem(this.options.prefix+e);try{return JSON.parse(e)}catch(t){return e}},t.prototype.removeLocalStorage=function(t){this.isString(t)&&t.length&&localStorage.removeItem(this.options.prefix+t)},t.prototype.clearLocalStorage=function(){const t=localStorage;var e,o=this.options.prefix.length;for(e in t)e.slice(0,o)===this.options.prefix&&t.removeItem(e)},t.prototype.toFloat=function(t,e){return this.isNumber(t)||(t=parseFloat(t,10)),this.isNumber(e)||(e=0),Math.round(Math.round(t*Math.pow(10,e+1))/10)/Math.pow(10,e)},t.prototype.numberFormat=function(t,e){const o={decimals:0,fillZero:!1,decimalPoint:".",separator:","};this.isNumber(e)?o.decimals=e:this.isObject(e)&&Object.assign(o,e);const r=(t=(t=this.toFloat(t,o.decimals)).toFixed(o.decimals)).split(".");return this.isString(o.separator)&&o.separator.length&&(r[0]=r[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o.separator)),0<o.decimals&&1<r.length&&(o.fillZero||(r[1]=r[1].replace(/0+$/,""))),t=1<r.length&&r[1].length?r.join(o.decimalPoint):r[0]},t.prototype.arrayUnique=function(o){if(!this.isArray(o))return o;const r=[],n={};for(let t=0,e;null!=(e=o[t]);t++)n[e]||(r.push(e),n[e]=!0);return r},t.prototype.getArraySubValue=function(t){let e;if(this.isArray(t.list)&&t.list.length)for(var o of t.list)if(t.query===o[t.src]){e=o[t.to];break}return void 0===e?t.value:e},t.prototype.getObjectValue=function(t){var e;let o;if(!this.isString(t.keys))return t.value;t.keys=t.keys.split("."),o=this.isObject(t.scope)?t.scope:window;for(e of t.keys){if(this.isUndefined(o[e])){o=t.value;break}o=o[e]}return o},t.prototype.getRandomNumber=function(t,e){return this.isNumber(t)||(t=0),(e=!this.isNumber(e)?0:e)<t&&(e=t),Math.round(Math.random()*(e-t)+t)},t.prototype.getRandomString=function(t,e){return this.isNumber(t)||(t=0),this.isString(e)&&e.length||(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"),Array.apply(0,Array(t)).map(()=>e.charAt(Math.floor(Math.random()*e.length))).join("")},t.prototype.replaceEnter=function(t){return this.isString(t)?t=(t=t.replace(/\r\n/g,"<br>")).replace(/\r|\n/g,"<br>"):t},t.prototype.replaceQuot=function(t,e){return this.isString(t)?t=!0===e?(t=t.replace(/&#34;/g,'"')).replace(/&#39;/g,"'"):(t=t.replace(/"/g,"&#34;")).replace(/'/g,"&#39;"):t},t.prototype.replaceHtml=function(t,e){return this.isString(t)?(t=t.trim(),t=!0===e?(t=(t=t.replace(/&#34;/g,'"')).replace(/&#39;/g,"'")).replace(/&#60;/g,"<"):(t=(t=t.replace(/"/g,"&#34;")).replace(/'/g,"&#39;")).replace(/</g,"&#60;")):t},t.prototype.loadingShow=function(t){var e=this;const o={text:"",mask:!0};e.isString(t)?o.text=t:e.isObject(t)&&Object.assign(o,t),e.isString(o.text)&&o.text.length?e.dom.loading.setAttribute("title",o.text):e.dom.loading.removeAttribute("title"),o.mask?e.dom.loading.classList.remove("notmask"):e.dom.loading.classList.add("notmask"),document.body.appendChild(e.dom.loading)},t.prototype.loadingHide=function(){document.body.contains(this.dom.loading)&&document.body.removeChild(this.dom.loading)},t.prototype.loadingToggle=function(t){document.body.contains(this.dom.loading)?this.loadingHide():this.loadingShow(t)},t.prototype.panelShow=function(t,e){const o=this.getDom(t);if(o){e=Object.assign({lock:!0,blur:!1},e);o.classList.remove("out"),o.classList.contains("in")||(this.panelCount++,o.classList.add("in"));const r=[];return e.lock&&r.push("lock"),e.blur&&r.push("blur"),r.length&&document.documentElement.classList.add(...r),o}},t.prototype.panelHide=function(t){var e=this;const o=e.getDom(t);if(o)return o.classList.remove("in"),o.classList.contains("out")||(e.panelCount--,o.classList.add("out")),e.panelCount<0&&(e.panelCount=0),e.panelCount<=0&&document.documentElement.classList.remove("lock","blur"),o},t.prototype.panelToggle=function(t,e){const o=this.getDom(t);o&&(o.classList.contains("in")?this.panelHide(o):this.panelShow(o,e))},t.prototype.initTabBar=function(t,e,o){const r=this.getDom(t);if(r)return r.addEventListener("click",t=>{const e=t.target;t=e.nodeName.toLowerCase();if("a"===t&&"sub"===e.rel){event.preventDefault();const o=e.parentNode;o.classList.contains("hover")?o.classList.remove("hover"):o.classList.add("hover")}}),this.isObject(e)&&this.buildTabBar(r,e,o),r},t.prototype.buildTabBar=function(t,e,o){const r=this.getDom(t);if(r){!this.isString(o)&&r.dataset.target&&(o=r.dataset.target);const n=template.compile(GLOBAL.template.footerNav);o=n({data:e,target:o});return r.innerHTML=o,r}},t.prototype.initFilterTool=function(t,e){const c=this,u=c.getDom(t);if(u)return u.addEventListener("click",o=>{const r=o.target;o=r.nodeName.toLowerCase();if("dt"===o){const l=r.parentNode;var t=l.classList.contains("hover");if(l.classList.contains("col")){for(var e of l.parentNode.children)"dl"===e.nodeName.toLowerCase()&&e.classList.remove("hover");t?(u.classList.remove("hover"),l.classList.remove("hover")):(u.classList.add("hover"),l.classList.add("hover"))}else if(l.classList.contains("row")&&!t){for(var n of l.parentNode.children)"dl"===n.nodeName.toLowerCase()&&n.classList.remove("hover");t?l.classList.remove("hover"):l.classList.add("hover")}}else if("a"===o){t=r.rel,o=r.rev;if(t){event.preventDefault(),u.classList.remove("hover");for(var i of u.querySelectorAll("dl"))i.classList.contains("col")&&i.classList.remove("hover");if("close"!==t){const p=c.closest(r,"dl.col");let t;for(var s of p.children)if("dt"===s.nodeName.toLowerCase()){t=s;break}let e=r.dataset.title;o&&c.isString(e)&&e.length||(e=t.dataset.title),t.innerHTML=e;for(var a of p.querySelectorAll("a"))a.classList.remove("n");r.classList.add("n")}}}}),c.isObject(e)&&c.buildFilterTool(u,e),u},t.prototype.buildFilterTool=function(t,e){const o=this.getDom(t);if(o){const r=template.compile(GLOBAL.template.filterTool);e=r({data:e});return o.innerHTML=e,o}},t.prototype.getFormData=function(t){t=this.getDom(t);if(t){const r=new FormData(t),n={};for(var e of r.entries()){var[o,e]=e;o in n?(this.isArray(n[o])||(n[o]=[n[o]]),n[o].push(e)):n[o]=e}return n}},t.prototype.createUrlHash=function(t,e,o){var r,n;const i={},s=[];let a="#";for(r in this.isArray(e)&&e.length||(e=Object.getOwnPropertyNames(t)),t)0<=e.indexOf(r)&&t[r]&&((n=String(t[r])).length&&(i[r]=n,s.push(r+"="+n)));s.length&&(a+=this.options.hashTag+s.join("&")),!0===o?history.pushState(i,document.title,a):history.replaceState(i,document.title,a)},t.prototype.removeUrlHash=function(t,e){const o=location.hash.replace(new RegExp("^#"+this.options.hashTag),"");var r,n=o.split("&");const i={};if(this.isArray(t)&&t.length)for(var s of n)s.indexOf("=")&&(r=s.slice(0,s.indexOf("=")),-1===t.indexOf(r)&&(i[r]=s.slice(s.indexOf("=")+1)));this.createUrlHash(i,[],e)},t.prototype.getPageHtml=function(t){var e,o,r=this;const n={code:"{{count}}{{cur}}{{first}}{{last}}{{number}}{{prev}}{{next}}",numberLength:9,language:{first:"首页",last:"末页",prev:"上一页",next:"下一页",countBefore:"共 ",countAfter:" 页",curBefore:"第 ",curAfter:" 页",sumBefore:"共 ",sumAfter:" 条",selectBefore:"",selectAfter:"条/页"}};let i="";for(e in t)r.isArray(t[e])?n[e]=Array.from(t[e]):r.isObject(t[e])?e in n?Object.assign(n[e],t[e]):n[e]=Object.assign({},t[e]):n[e]=t[e];if(!r.isNumber(n.page)||!r.isNumber(n.pageCount)||n.page<1||n.pageCount<1)return i;const s={sum:'<span class="sum">'+n.language.sumBefore+n.sum+n.language.sumAfter+"</span>",count:'<span class="count">'+n.language.countBefore+n.pageCount+n.language.countAfter+"</span>",cur:'<span class="cur">'+n.language.curBefore+n.page+n.language.curAfter+"</span>",sizeSet:"",number:"",prev:"",next:"",first:"",last:""};if(r.isArray(n.sizeList)&&n.sizeList.length){s.sizeSet='<select class="select" name="'+n.rel+'_size">';for(var a of n.sizeList)s.sizeSet+='<option value="'+a+'"',n.sizeSet===a&&(s.sizeSet+=" selected"),s.sizeSet+=">"+n.language.selectBefore+a+n.language.selectAfter+"</option>";s.sizeSet+="</select>"}if(1<n.pageCount){r.isString(n.url)?(s.prev='<a href="'+n.url+(n.page-1)+'">'+n.language.prev+"</a>",s.next='<a href="'+n.url+(n.page+1)+'">'+n.language.next+"</a>",s.first='<a href="'+n.url+'1">'+n.language.first+"</a>",s.last='<a href="'+n.url+n.pageCount+'">'+n.language.last+"</a>"):r.isString(n.rel)&&(s.prev='<a href="javascript://" rel="'+n.rel+'" rev="'+(n.page-1)+'">'+n.language.prev+"</a>",s.next='<a href="javascript://" rel="'+n.rel+'" rev="'+(n.page+1)+'">'+n.language.next+"</a>",s.first='<a href="javascript://" rel="'+n.rel+'" rev="1">'+n.language.first+"</a>",s.last='<a href="javascript://" rel="'+n.rel+'" rev="'+n.pageCount+'">'+n.language.last+"</a>"),1===n.page?(s.prev="",s.first=""):n.page===n.pageCount&&(s.next="",s.last="");let e=1,o=1;o=n.pageCount<=n.numberLength?(e=1,n.pageCount):n.page<=Math.floor(n.numberLength/2)?(e=1,n.numberLength):n.pageCount-n.page<Math.floor(n.numberLength/2)?(e=n.pageCount-n.numberLength+1,n.pageCount):(e=n.page-Math.floor(n.numberLength/2),n.page+Math.floor(n.numberLength/2)),e<1&&(e=1),o>n.pageCount&&(o=n.pageCount);for(let t=e;t<=o;t++)t===n.page?s.number+="<strong>"+t+"</strong>":r.isString(n.url)?s.number+='<a href="'+n.url+t+'">'+t+"</a>":r.isString(n.rel)&&(s.number+='<a href="javascript://" rel="'+n.rel+'" rev="'+t+'">'+t+"</a>")}for(o in i=n.code,s)i=i.replace("{{"+o+"}}",s[o]);return i},t.prototype.compressPicture=function(t,e,o){const r=this,n=document.createElement("canvas");let i=[];const s=[],a=Object.assign({maxWidth:0,maxHeight:0,quality:.8,fileType:""},e);if("[object FileList]"===Object.prototype.toString.call(t)?i=Array.from(t):"[object File]"===Object.prototype.toString.call(t)&&i.push(t),!i.length)return void console.warn("[compressPicture] Not File");const l=()=>{const o=i.shift();let r=a.fileType||o.type;r=r||"image/jpeg",EXIF.getData(o,function(){var t=EXIF.getTag(this,"Orientation");const e=new MegaPixImage(o);e.render(n,{maxWidth:a.maxWidth,maxHeight:a.maxHeight,orientation:t}),setTimeout(()=>{s.push(n.toDataURL(r,a.quality)),(i.length?l:p)()},200)})},p=()=>{r.isFunction(o)&&o(s)};l()},new t});


/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 *
 * iOS 8 以上会导致 select 自动收起，已使用该方法修改：
 * https://github.com/ftlabs/fastclick/issues/268#issuecomment-65022184
 */
!function(){"use strict";function a(b,d){function f(a,b){return function(){return a.apply(b,arguments)}}var e,g,h,i,j;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;j>i;i++)h[g[i]]=f(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(e=b.onclick,b.addEventListener("click",function(a){e(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if("select"==b.nodeName.toLowerCase())return!1;if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return d&&!e&&(i=k.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction?!0:(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(-1!==b.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===a.style.touchAction||"manipulation"===a.style.touchAction?!0:!1)},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}();


/*
 * Purl (A JavaScript URL parser) v2.3.1
 * Developed and maintanined by Mark Perkins, mark@allmarkedup.com
 * Source repository: https://github.com/allmarkedup/jQuery-URL-Parser
 * Licensed under an MIT-style license. See https://github.com/allmarkedup/jQuery-URL-Parser/blob/master/LICENSE for details.
 */
!function(a){"function"==typeof define&&define.amd?define(a):window.purl=a()}(function(){function f(a,c){for(var e=decodeURI(a),f=d[c?"strict":"loose"].exec(e),g={attr:{},param:{},seg:{}},h=14;h--;)g.attr[b[h]]=f[h]||"";return g.param["query"]=k(g.attr["query"]),g.param["fragment"]=k(g.attr["fragment"]),g.seg["path"]=g.attr.path.replace(/^\/+|\/+$/g,"").split("/"),g.seg["fragment"]=g.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),g.attr["base"]=g.attr.host?(g.attr.protocol?g.attr.protocol+"://"+g.attr.host:g.attr.host)+(g.attr.port?":"+g.attr.port:""):"",g}function g(b){var c=b.tagName;return"undefined"!=typeof c?a[c.toLowerCase()]:c}function h(a,b){var c,d;if(0===a[b].length)return a[b]={};c={};for(d in a[b])c[d]=a[b][d];return a[b]=c,c}function i(a,b,c,d){var g,f=a.shift();f?(g=b[c]=b[c]||[],"]"==f?o(g)?""!==d&&g.push(d):"object"==typeof g?g[p(g).length]=d:g=b[c]=[b[c],d]:~f.indexOf("]")?(f=f.substr(0,f.length-1),!e.test(f)&&o(g)&&(g=h(b,c)),i(a,g,f,d)):(!e.test(f)&&o(g)&&(g=h(b,c)),i(a,g,f,d))):o(b[c])?b[c].push(d):b[c]="object"==typeof b[c]?d:"undefined"==typeof b[c]?d:[b[c],d]}function j(a,b,c){var d,f,g;if(~b.indexOf("]"))d=b.split("["),i(d,a,"base",c);else{if(!e.test(b)&&o(a.base)){f={};for(g in a.base)f[g]=a.base[g];a.base=f}""!==b&&l(a.base,b,c)}return a}function k(a){return n(String(a).split(/&|;/),function(a,b){try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(c){}var d=b.indexOf("="),e=m(b),f=b.substr(0,e||d),g=b.substr(e||d,b.length);return g=g.substr(g.indexOf("=")+1,g.length),""===f&&(f=b,g=""),j(a,f,g)},{base:{}}).base}function l(a,b,c){var d=a[b];"undefined"==typeof d?a[b]=c:o(d)?d.push(c):a[b]=[d,c]}function m(a){var c,d,e,b=a.length;for(e=0;b>e;++e)if(d=a[e],"]"==d&&(c=!1),"["==d&&(c=!0),"="==d&&!c)return e}function n(a,b){for(var c=0,d=a.length>>0,e=arguments[2];d>c;)c in a&&(e=b.call(void 0,e,a[c],c,a)),++c;return e}function o(a){return"[object Array]"===Object.prototype.toString.call(a)}function p(a){var c,b=[];for(c in a)a.hasOwnProperty(c)&&b.push(c);return b}function q(a,b){return 1===arguments.length&&a===!0&&(b=!0,a=void 0),b=b||!1,a=a||window.location.toString(),{data:f(a,b),attr:function(a){return a=c[a]||a,"undefined"!=typeof a?this.data.attr[a]:this.data.attr},param:function(a){return"undefined"!=typeof a?this.data.param.query[a]:this.data.param.query},fparam:function(a){return"undefined"!=typeof a?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){return"undefined"==typeof a?this.data.seg.path:(a=0>a?this.data.seg.path.length+a:a-1,this.data.seg.path[a])},fsegment:function(a){return"undefined"==typeof a?this.data.seg.fragment:(a=0>a?this.data.seg.fragment.length+a:a-1,this.data.seg.fragment[a])}}}var a={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},b=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],c={anchor:"fragment"},d={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},e=/^[0-9]+$/;return q.jQuery=function(a){null!=a&&(a.fn.url=function(b){var c="";return this.length&&(c=a(this).attr(g(this[0]))||""),q(c,b)},a.url=q)},q.jQuery(window.jQuery),q});


/*! art-template@4.10.0 for browser | https://github.com/aui/art-template */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.template=t():e.template=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(t,n(4))},function(e,t,n){"use strict";var r=n(17),o=n(2),i=n(18),s=function(e,t){t.onerror(e,t);var n=function(){return"{Template Error}"};return n.mappings=[],n.sourcesContent=[],n},a=function c(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};"string"!=typeof e?t=e:t.source=e,t=o.$extend(t),e=t.source,t.debug&&(t.cache=!1,t.bail=!1,t.minimize=!1,t.compileDebug=!0),t.compileDebug&&(t.minimize=!1),t.filename&&(t.filename=t.resolveFilename(t.filename,t));var n=t.filename,a=t.cache,u=t.caches;if(a&&n){var p=u.get(n);if(p)return p}if(!e)try{e=t.loader(n,t),t.source=e}catch(d){var l=new i({name:"CompileError",path:n,message:"template not found: "+d.message,stack:d.stack});if(t.bail)throw l;return s(l,t)}var f=void 0,h=new r(t);try{f=h.build()}catch(l){if(l=new i(l),t.bail)throw l;return s(l,t)}var m=function(e,n){try{return f(e,n)}catch(l){if(!t.compileDebug)return t.cache=!1,t.compileDebug=!0,c(t)(e,n);if(l=new i(l),t.bail)throw l;return s(l,t)()}};return m.mappings=f.mappings,m.sourcesContent=f.sourcesContent,m.toString=function(){return f.toString()},a&&n&&u.set(n,m),m};a.Compiler=r,e.exports=a},function(e,t,n){"use strict";function r(){this.$extend=function(e){return e=e||{},s(e,e instanceof r?e:this)}}var o=n(0),i=n(20),s=n(9),a=n(11),c=n(13),u=n(8),p=n(12),l=n(15),f=n(16),h=n(10),m=n(14),d={source:null,filename:null,rules:[f,l],escape:!0,debug:!!o&&"production"!==process.env.NODE_ENV,bail:!1,cache:!0,minimize:!0,compileDebug:!1,resolveFilename:m,include:a,htmlMinifier:h,htmlMinifierOptions:{collapseWhitespace:!0,minifyCSS:!0,minifyJS:!0,ignoreCustomFragments:[]},onerror:c,loader:p,caches:u,root:"/",extname:".art",ignore:[],imports:i};r.prototype=d,e.exports=new r},function(e,t){},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,t.matchToToken=function(e){var t={type:"invalid",value:e[0]};return e[1]?(t.type="string",t.closed=!(!e[3]&&!e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";var r=n(1),o=function(e,t,n){return r(e,n)(t)};e.exports=o},function(e,t,n){"use strict";var r={__data:Object.create(null),set:function(e,t){this.__data[e]=t},get:function(e){return this.__data[e]},reset:function(){this.__data={}}};e.exports=r},function(e,t,n){"use strict";var r=Object.prototype.toString,o=function(e){return null===e?"Null":r.call(e).slice(8,-1)},i=function s(e,t){var n=void 0,r=o(e);if("Object"===r?n=Object.create(t||{}):"Array"===r&&(n=[].concat(t||[])),n){for(var i in e)e.hasOwnProperty(i)&&(n[i]=s(e[i],n[i]));return n}return e};e.exports=i},function(e,t,n){"use strict";var r=n(0),o=function(e,t){if(r){var o,i=n(23).minify,s=t.htmlMinifierOptions,a=t.rules.map(function(e){return e.test});(o=s.ignoreCustomFragments).push.apply(o,a),e=i(e,s)}return e};e.exports=o},function(e,t,n){"use strict";var r=function(e,t,r,o){var i=n(1);return o=o.$extend({filename:o.resolveFilename(e,o),bail:!0,source:null}),i(o)(t,r)};e.exports=r},function(e,t,n){"use strict";var r=n(0),o=function(e){if(r){return n(3).readFileSync(e,"utf8")}var t=document.getElementById(e);return t.value||t.innerHTML};e.exports=o},function(e,t,n){"use strict";var r=function(e){console.error(e.name,e.message)};e.exports=r},function(e,t,n){"use strict";var r=n(0),o=/^\.+\//,i=function(e,t){if(r){var i=n(3),s=t.root,a=t.extname;if(o.test(e)){var c=t.filename,u=!c||e===c,p=u?s:i.dirname(c);e=i.resolve(p,e)}else e=i.resolve(s,e);i.extname(e)||(e+=a)}return e};e.exports=i},function(e,t,n){"use strict";var r={test:/{{[ \t]*([@#]?)(\/?)([\w\W]*?)[ \t]*}}/,use:function(e,t,n,o){var i=this,s=i.options,a=i.getEsTokens(o.trim()),c=a.map(function(e){return e.value}),u={},p=void 0,l=!!t&&"raw",f=n+c.shift(),h=function(t,n){console.warn((s.filename||"anonymous")+":"+(e.line+1)+":"+(e.start+1)+"\nTemplate upgrade: {{"+t+"}} -> {{"+n+"}}")};switch("#"===t&&h("#value","@value"),f){case"set":o="var "+c.join("");break;case"if":o="if("+c.join("")+"){";break;case"else":var m=c.indexOf("if");m>-1?(c.splice(0,m+1),o="}else if("+c.join("")+"){"):o="}else{";break;case"/if":o="}";break;case"each":p=r._split(a),p.shift(),"as"===p[1]&&(h("each object as value index","each object value index"),p.splice(1,1));var d=p[0]||"$data",v=p[1]||"$value",g=p[2]||"$index";o="$each("+d+",function("+v+","+g+"){";break;case"/each":o="})";break;case"echo":f="print",h("echo value","value");case"print":case"include":case"extend":p=r._split(a),p.shift(),o=f+"("+p.join(",")+")";break;case"block":o="block("+c.join("")+",function(){";break;case"/block":o="})";break;default:if(-1!==c.indexOf("|")){for(var y=f,b=[],x=c.filter(function(e){return!/^\s+$/.test(e)});"|"!==x[0];)y+=x.shift();x.filter(function(e){return":"!==e}).forEach(function(e){"|"===e?b.push([]):b[b.length-1].push(e)}),b.reduce(function(e,t){var n=t.shift();return t.unshift(e),o="$imports."+n+"("+t.join(",")+")"},y)}else o=""+f+c.join("");l||(l="escape")}return u.code=o,u.output=l,u},_split:function(e){for(var t=0,n=e.shift(),r=[[n]];t<e.length;){var o=e[t],i=o.type;"whitespace"!==i&&"comment"!==i&&("punctuator"===n.type&&"]"!==n.value||"punctuator"===i?r[r.length-1].push(o):r.push([o]),n=o),t++}return r.map(function(e){return e.map(function(e){return e.value}).join("")})}};e.exports=r},function(e,t,n){"use strict";var r={test:/<%(#?)((?:==|=#|[=-])?)([\w\W]*?)(-?)%>/,use:function(e,t,n,r){return n={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"}[n],t&&(r="/*"+e+"*/",n=!1),{code:r,output:n}}};e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(19),i=n(21),s="$data",a="$imports",c="print",u="include",p="extend",l="block",f="$$out",h="$$line",m="$$blocks",d="$$slice",v="$$from",g="$$options",y=function(e,t){return e.hasOwnProperty(t)},b=JSON.stringify,x=function(){function e(t){var n,o,y=this;r(this,e);var b=t.source,x=t.minimize,w=t.htmlMinifier;if(this.options=t,this.stacks=[],this.context=[],this.scripts=[],this.CONTEXT_MAP={},this.ignore=[s,a,g].concat(t.ignore),this.internal=(n={},n[f]="''",n[h]="[0,0]",n[m]="arguments[1]||{}",n[v]="null",n[c]="function(){var s=''.concat.apply('',arguments);"+f+"+=s;return s}",n[u]="function(src,data){var s="+g+".include(src,data||"+s+",arguments[2]||"+m+","+g+");"+f+"+=s;return s}",n[p]="function(from){"+v+"=from}",n[d]="function(c,p,s){p="+f+";"+f+"='';c();s="+f+";"+f+"=p+s;return s}",n[l]="function(){var a=arguments,s;if(typeof a[0]==='function'){return "+d+"(a[0])}else if("+v+"){"+m+"[a[0]]="+d+"(a[1])}else{s="+m+"[a[0]];if(typeof s==='string'){"+f+"+=s}else{s="+d+"(a[1])}return s}}",n),this.dependencies=(o={},o[c]=[f],o[u]=[f,g,s,m],o[p]=[v,u],o[l]=[d,v,f,m],o),this.importContext(f),t.compileDebug&&this.importContext(h),x)try{b=w(b,t)}catch(E){}this.source=b,this.getTplTokens(b,t.rules,this).forEach(function(e){e.type===i.TYPE_STRING?y.parseString(e):y.parseExpression(e)})}return e.prototype.getTplTokens=function(){return i.apply(undefined,arguments)},e.prototype.getEsTokens=function(e){return o(e)},e.prototype.getVariables=function(e){var t=!1;return e.filter(function(e){return"whitespace"!==e.type&&"comment"!==e.type}).filter(function(e){return"name"===e.type&&!t||(t="punctuator"===e.type&&"."===e.value,!1)}).map(function(e){return e.value})},e.prototype.importContext=function(e){var t=this,n="",r=this.internal,o=this.dependencies,i=this.ignore,c=this.context,u=this.options,p=u.imports,l=this.CONTEXT_MAP;y(l,e)||-1!==i.indexOf(e)||(y(r,e)?(n=r[e],y(o,e)&&o[e].forEach(function(e){return t.importContext(e)})):n="$escape"===e||"$each"===e||y(p,e)?a+"."+e:s+"."+e,l[e]=n,c.push({name:e,value:n}))},e.prototype.parseString=function(e){var t=e.value;if(t){var n=f+"+="+b(t);this.scripts.push({source:t,tplToken:e,code:n})}},e.prototype.parseExpression=function(e){var t=this,n=e.value,r=e.script,o=r.output,s=r.code;o&&(s=!1===escape||o===i.TYPE_RAW?f+"+="+r.code:f+"+=$escape("+r.code+")");var a=this.getEsTokens(s);this.getVariables(a).forEach(function(e){return t.importContext(e)}),this.scripts.push({source:n,tplToken:e,code:s})},e.prototype.checkExpression=function(e){for(var t=[[/^\s*}[\w\W]*?{?[\s;]*$/,""],[/(^[\w\W]*?\([\w\W]*?(?:=>|\([\w\W]*?\))\s*{[\s;]*$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*{[\s;]*$)/,"$1}"]],n=0;n<t.length;){if(t[n][0].test(e)){var r;e=(r=e).replace.apply(r,t[n]);break}n++}try{return new Function(e),!0}catch(o){return!1}},e.prototype.build=function(){var e=this.options,t=this.context,n=this.scripts,r=this.stacks,o=this.source,c=e.filename,l=e.imports,d=[],x=y(this.CONTEXT_MAP,p),w=0,E=function(e,t){var n=t.line,o=t.start,i={generated:{line:r.length+w+1,column:1},original:{line:n+1,column:o+1}};return w+=e.split(/\n/).length-1,i},k=function(e){return e.replace(/^[\t ]+|[\t ]$/g,"")};r.push("function("+s+"){"),r.push("'use strict'"),r.push(s+"="+s+"||{}"),r.push("var "+t.map(function(e){return e.name+"="+e.value}).join(",")),e.compileDebug?(r.push("try{"),n.forEach(function(e){e.tplToken.type===i.TYPE_EXPRESSION&&r.push(h+"=["+[e.tplToken.line,e.tplToken.start].join(",")+"]"),d.push(E(e.code,e.tplToken)),r.push(k(e.code))}),r.push("}catch(error){"),r.push("throw {"+["name:'RuntimeError'","path:"+b(c),"message:error.message","line:"+h+"[0]+1","column:"+h+"[1]+1","source:"+b(o),"stack:error.stack"].join(",")+"}"),r.push("}")):n.forEach(function(e){d.push(E(e.code,e.tplToken)),r.push(k(e.code))}),x&&(r.push(f+"=''"),r.push(u+"("+v+","+s+","+m+")")),r.push("return "+f),r.push("}");var T=r.join("\n");try{var $=new Function(a,g,"return "+T)(l,e);return $.mappings=d,$.sourcesContent=[o],$}catch(_){for(var O=0,j=0,S=0;O<n.length;){var C=n[O];if(!this.checkExpression(C.code)){j=C.tplToken.line,S=C.tplToken.start;break}O++}throw{name:"CompileError",path:c,message:_.message,line:j+1,column:S+1,source:o,generated:T,stack:_.stack}}},e}();x.CONSTS={DATA:s,IMPORTS:a,PRINT:c,INCLUDE:u,EXTEND:p,BLOCK:l,OPTIONS:g,OUT:f,LINE:h,BLOCKS:m,SLICE:d,FROM:v,ESCAPE:"$escape",EACH:"$each"},e.exports=x},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.name,n=e.source,r=e.path,o=e.line,i=e.column,s=e.message;if(!n)return s;var a=n.split(/\n/),c=Math.max(o-3,0),u=Math.min(a.length,o+3),p=a.slice(c,u).map(function(e,t){var n=t+c+1;return(n===o?" >> ":"    ")+n+"| "+e}).join("\n");return(r||"anonymous")+":"+o+":"+i+"\n"+p+"\n\n"+t+": "+s}var a=function(e){function t(n){r(this,t);var i=o(this,e.call(this,n.message));return i.name="TemplateError",i.message=s(n),Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return i(t,e),t}(Error);e.exports=a},function(e,t,n){"use strict";var r=n(24),o=n(5)["default"],i=n(5).matchToToken,s=function(e){return e.match(o).map(function(e){return o.lastIndex=0,i(o.exec(e))}).map(function(e){return"name"===e.type&&r(e.value)&&(e.type="keyword"),e})};e.exports=s},function(e,t,n){"use strict";(function(t){function r(e){return"string"!=typeof e&&(e=e===undefined||null===e?"":"function"==typeof e?r(e.call(e)):JSON.stringify(e)),e}function o(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",o=void 0,i=void 0,s=void 0;for(o=n.index,i=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=s}return i!==o?r+t.substring(i,o):r}/*! art-template@runtime | https://github.com/aui/art-template */
var i=n(0),s=Object.create(i?t:window),a=/["&'<>]/;s.$escape=function(e){return o(r(e))},s.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=s}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t,n,r){var o=new String(e);return o.line=t,o.start=n,o.end=r,o}var o=function(e,t){for(var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},o=[{type:"string",value:e,line:0,start:0,end:e.length}],i=0;i<t.length;i++)!function(e){for(var t=e.test.ignoreCase?"ig":"g",i=e.test.source+"|^$|[\\w\\W]",s=new RegExp(i,t),a=0;a<o.length;a++)if("string"===o[a].type){for(var c=o[a].line,u=o[a].start,p=o[a].end,l=o[a].value.match(s),f=[],h=0;h<l.length;h++){var m=l[h];e.test.lastIndex=0;var d=e.test.exec(m),v=d?"expression":"string",g=f[f.length-1],y=g||o[a],b=y.value;u=y.line===c?g?g.end:u:b.length-b.lastIndexOf("\n")-1,p=u+m.length;var x={type:v,value:m,line:c,start:u,end:p};if("string"===v)g&&"string"===g.type?(g.value+=m,g.end+=m.length):f.push(x);else{d[0]=new r(d[0],c,u,p);var w=e.use.apply(n,d);x.script=w,f.push(x)}c+=m.split(/\n/).length-1}o.splice.apply(o,[a,1].concat(f)),a+=f.length-1}}(t[i]);return o};o.TYPE_STRING="string",o.TYPE_EXPRESSION="expression",o.TYPE_RAW="raw",o.TYPE_ESCAPE="escape",e.exports=o},function(e,t,n){"use strict";var r=n(7),o=n(1),i=n(6),s=function(e,t){return t instanceof Object?r({filename:e},t):o({filename:e,source:t})};s.render=r,s.compile=o,s.defaults=i,e.exports=s},function(e,t){!function(e){e.noop=function(){}}("object"==typeof e&&"object"==typeof e.exports?e.exports:window)},function(e,t,n){"use strict";var r={"abstract":!0,await:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"const":!0,"continue":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,"let":!0,"long":!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!0,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0,"yield":!0};e.exports=function(e){return r.hasOwnProperty(e)}}])});


/*!
 * cxCalendar
 * 
 * @version 2.0.3
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxCalendar
 * @license Released under the MIT license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){var b={dom:{},reg:{isYear:/^\d{4}$/,isTime:/^\d{1,2}(\:\d{1,2}){1,2}$/},settings:{},cacheDate:{},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isJquery:function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},isZepto:function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1},isInteger:function(a){return"number"==typeof a&&!isNaN(a)&&/^\d+$/.test(a)},isPlainObject:function(a){return"object"!=typeof a||a.nodeType||null!==a&&void 0!==a&&a===a.window?!1:a.constructor&&!Object.prototype.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isDateObject:function(a){return"[object Date]"===Object.prototype.toString.call(a)&&"function"==typeof a.getTime&&!isNaN(a.getTime())}};b.fillLeadZero=function(a,b){var c=String(a);return c.length<b&&(c=Array(b-c.length).fill(0).join("")+a),c},b.getMonthDays=function(a){var b=0===a%4&&0!==a%100||0===a%400?1:0;return[31,28+b,31,30,31,30,31,31,30,31,30,31]},b.getWeekNum=function(a){var b=this,c=a.getTime(),d=new Date(a.getFullYear(),0,1,0,0,0,0),e=d.getTime(),f=d.getDay(),g=0;return 0===f&&(f=7),e+=f>4?864e5*(8-f):864e5*(1-f),e>c?g=b.getWeekNum(new Date(a.getFullYear()-1,11,31)):(g=Math.floor((c-e)/864e5)+1,g=Math.ceil(g/7)),g},b.parseDate=function(a,b){var e,c=this,d=new Date;if(c.reg.isYear.test(a))d.setFullYear(parseInt(a,10));else if(/^\d+$/.test(a)||"number"==typeof a&&isFinite(a))d.setTime(parseInt(a,10));else{if("string"!=typeof a)return b===!0?d:null;c.reg.isTime.test(a)?(e=a.split(":"),2===e.length&&e.push(0),d.setHours(e[0],e[1],e[2])):(a=a.replace(/[\.\/]/g,"-"),/^\d{1,2}-\d{1,2}/.test(a)?a=d.getFullYear()+"-"+a:/^\d{4}-\d{1,2}$/.test(a)&&(a+="-1"),e=a.split(/[\-\sT\:]/),e[1]=parseInt(e[1],10)-1,5===e.length&&e.push(0),d.setFullYear.apply(d,e),e.length>3&&d.setHours.apply(d,e.slice(3)))}return(!c.isDateObject(d)||isNaN(d.getTime()))&&(d=b===!0?new Date:null),d},b.formatDate=function(a,b){var f,g,h,i,c=this,d=c.parseDate(b),e={};if(!d||"string"!=typeof a)return b;for(e.Y=d.getFullYear(),e.y=e.Y.toString(10).slice(-2),e.n=d.getMonth()+1,e.m=c.fillLeadZero(e.n,2),e.j=d.getDate(),e.d=c.fillLeadZero(e.j,2),e.G=d.getHours(),e.H=c.fillLeadZero(e.G,2),e.g=e.G>12?e.G-12:e.G,e.h=c.fillLeadZero(e.g,2),e.i=c.fillLeadZero(d.getMinutes(),2),e.s=c.fillLeadZero(d.getSeconds(),2),e.timestamp=d.getTime(),f=a,g=["timestamp","Y","y","m","n","d","j","H","h","G","g","i","s"],h=new RegExp("("+g.join("|")+")","g"),f=f.replace(/([\{\}])/g,"\\$1"),f=f.replace(h,function(a,b){return"{{"+b+"}}"}),f=f.replace(/\\\{\{(.)\}\}/g,"$1"),i=g.length-1;i>=0;i--)f=f.replace(new RegExp("{{"+g[i]+"}}","g"),e[g[i]]);return f=f.replace(/\\(.)/g,"$1")},b.init=function(){var b=this;b.dom.pane=a("<div></div>",{"class":"cxcalendar"}),b.dom.head=a("<div></div>",{"class":"cxcalendar_hd"}),b.dom.main=a("<div></div>",{"class":"cxcalendar_bd"}).appendTo(b.dom.pane),b.dom.acts=a("<div></div>",{"class":"cxcalendar_acts"}),b.dom.blockBg=a("<div></div>",{"class":"cxcalendar_lock"}),b.dom.yearSelect=a("<select></select>",{"class":"year"}),b.dom.monthSelect=a("<select></select>",{"class":"month"}),b.dom.dateSet=a("<ul></ul>"),b.dom.timeSet=a("<div></div>",{"class":"times"}),b.dom.hourSelect=a("<select></select>",{"class":"hour"}),b.dom.mintSelect=a("<select></select>",{"class":"mint"}),b.dom.secsSelect=a("<select></select>",{"class":"secs"}),b.dom.timeSet.append(b.dom.hourSelect).append("<i></i>").append(b.dom.mintSelect).append("<i></i>").append(b.dom.secsSelect).append('<a class="confirm" href="javascript://" rel="confirm"></a>'),document.addEventListener("DOMContentLoaded",function(){a("body").append(b.dom.pane).append(b.dom.blockBg)}),b.dom.blockBg.on("click",function(){b.hidePane()}),b.dom.pane.on("click","a",function(a){var c,d;switch(a.preventDefault(),c=this,c.rel){case"prev":b.gotoPrev();break;case"next":b.gotoNext();break;case"today":b.hidePane(),b.setDate((new Date).getTime());break;case"clear":b.hidePane(),b.clearDate();break;case"confirm":d="datetime"===b.settings.type&&"string"==typeof b.cacheDate.txt&&b.cacheDate.txt.length?b.cacheDate.txt:[b.defDate.year,b.defDate.month,b.defDate.day].join("-"),d+=" "+[b.dom.hourSelect.val(),b.dom.mintSelect.val(),b.dom.secsSelect.val()].join(":"),b.hidePane(),b.setDate(d)}}),b.dom.pane.on("change","select",function(){var a=this,c=a.getAttribute("class")||a.getAttribute("classname");("year"===c||"month"===c)&&("year"!==c||"date"!==b.settings.type&&"datetime"!==b.settings.type||b.rebulidMonthSelect(),b.gotoDate())}),b.dom.pane.on("click","li",function(){var e,c=a(this),d=c.data("date");if(d){if(c.addClass("selected").siblings("li").removeClass("selected"),"datetime"===b.settings.type)return e=d.split("-"),b.cacheDate={year:parseInt(e[0],10),month:parseInt(e[1],10),day:parseInt(e[2],10),txt:d},void 0;"month"===b.settings.type&&(d+="-1"),b.hidePane(),b.setDate(d)}})},b.getLanguage=function(b){var c=this;return c.isPlainObject(b)?b:("string"!=typeof b&&("string"==typeof navigator.language?b=navigator.language:"string"==typeof navigator.browserLanguage&&(b=navigator.browserLanguage)),"string"==typeof b&&(b=b.toLowerCase()),"string"==typeof b&&"object"==typeof a.cxCalendar.languages[b]?a.cxCalendar.languages[b]:a.cxCalendar.languages["default"])},b.setOptions=function(b){var e,f,g,h,i,c=this;if(new Date,c.isPlainObject(b)&&(c.settings=a.extend({},a.cxCalendar.defaults,b)),f=c.reg.isYear.test(c.settings.endDate)?new Date(c.settings.endDate,11,31):c.parseDate(c.settings.endDate,!0),f.setHours(23,59,59),c.maxDate={year:f.getFullYear(),month:f.getMonth()+1,day:f.getDate(),time:f.getTime()},e=c.reg.isYear.test(c.settings.startDate)?new Date(c.settings.startDate,0,1):c.parseDate(c.settings.startDate),c.isDateObject(e)||(e=new Date,e.setFullYear(e.getFullYear()-1)),e.getTime()>c.maxDate.time&&(e=new Date(c.maxDate.year-1,c.maxDate.month-1,c.maxDate.day)),e.setHours(0,0,0,0),c.minDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),time:e.getTime()},g=c.parseDate(c.settings.date,!0),g.getTime()<c.minDate.time?g=c.parseDate(c.minDate.time,!0):g.getTime()>c.maxDate.time&&(g=c.parseDate(c.maxDate.time,!0)),c.defDate={year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate(),hour:g.getHours(),mint:g.getMinutes(),secs:g.getSeconds(),time:g.getTime()},c.settings.wday%=7,c.settings.saturday=6-c.settings.wday,c.settings.sunday=(7-c.settings.wday)%7,c.language=c.getLanguage(c.settings.language),Array.isArray(c.language.holiday)&&c.language.holiday.length)for(c.holiday={},h=0,i=c.language.holiday.length;i>h;h++)c.holiday[c.language.holiday[h].day]=c.language.holiday[h].name;else c.holiday=null},b.buildPane=function(){var b,d,e,f,g,h,a=this,c=a.defDate.year;if(a.dom.head.empty(),a.dom.main.empty(),a.dom.acts.empty(),e="cxcalendar","string"==typeof a.settings.baseClass&&(e+=" "+a.settings.baseClass),a.dom.pane.attr("class",e),["month","date","datetime"].indexOf(a.settings.type)>=0){for(d="",f=a.minDate.year;f<=a.maxDate.year;f++)d+='<option value="'+f+'">'+f+"</option>";a.dom.yearSelect.html(d).val(c)}else if("year"===a.settings.type){for(g=10*Math.floor(a.minDate.year/10),d="",f=g;f<=a.maxDate.year;f+=a.settings.yearNum)f<=a.defDate.year&&(c=f),h=f+a.settings.yearNum-1,d+='<option value="'+f+'">'+f+" - ",d+=h<a.maxDate.year?h:a.maxDate.year,d+="</option>";a.dom.yearSelect.html(d).val(c)}["date","datetime"].indexOf(a.settings.type)>=0?(a.dom.head.append(a.dom.yearSelect).append("<em></em>").append(a.dom.monthSelect).append("<em></em>").append('<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),a.dom.dateSet.attr("class","days"),a.dom.main.append(a.dom.dateSet),a.dom.acts.html('<a class="today" href="javascript://" rel="today"></a><a class="clear" href="javascript://" rel="clear"></a>'),a.dom.pane.prepend(a.dom.head).append(a.dom.acts),"datetime"===a.settings.type&&a.buildTimes(),a.rebulidMonthSelect(),a.dom.monthSelect.val(a.defDate.month),a.gotoDate([a.defDate.year,a.defDate.month].join("-"))):"time"===a.settings.type?(a.dom.head.remove(),a.dom.acts.remove(),a.buildTimes()):"month"===a.settings.type?(a.dom.head.append(a.dom.yearSelect).append("<em></em>").append('<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),a.dom.dateSet.attr("class","months"),a.dom.main.append(a.dom.dateSet),a.dom.acts.remove(),a.dom.pane.prepend(a.dom.head),a.gotoDate(a.defDate.year)):"year"===a.settings.type&&(b="",a.dom.head.append(a.dom.yearSelect).append('<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),a.dom.dateSet.attr("class","years"),a.dom.main.append(a.dom.dateSet),a.dom.acts.remove(),a.dom.pane.prepend(a.dom.head),a.gotoDate(a.defDate.year))},b.rebulidMonthSelect=function(){var f,h,a=this,b=parseInt(a.dom.yearSelect.val(),10),c=parseInt(a.dom.monthSelect.val(),10),d=1,e=12,g="";for(b===a.minDate.year&&b===a.maxDate.year?(d=a.minDate.month,e=a.maxDate.month):b===a.minDate.year?(d=a.minDate.month,e=12):b===a.maxDate.year&&(d=1,e=a.maxDate.month),h=d;e>=h;h++)c===h&&(f=c),g+='<option value="'+h+'">'+a.language.monthList[h-1]+"</option>";a.dom.monthSelect.html(g),f&&a.dom.monthSelect.val(f)},b.buildDays=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,c=this;if(c.isInteger(a)&&c.isInteger(b)){for(d=new Date(a,b-1,1),a=d.getFullYear(),b=d.getMonth()+1,a<c.minDate.year||a===c.minDate.year&&b<c.minDate.month?(a=c.minDate.year,b=c.minDate.month):(a>c.maxDate.year||a===c.maxDate.year&&b>c.maxDate.month)&&(a=c.maxDate.year,b=c.maxDate.month),e=b-1,f=c.getMonthDays(a),g=new Date(a,e,1),h=new Date,i=[h.getFullYear(),h.getMonth()+1,h.getDate()].join("-"),j=g.getDay()-c.settings.wday,0>j&&(j+=7),k=c.settings.lockRow?42:7*Math.ceil((f[e]+j)/7),t="",u=0;7>u;u++)t+='<li class="week',u===c.settings.saturday?t+=" sat":u===c.settings.sunday&&(t+=" sun"),t+='">'+c.language.weekList[(u+c.settings.wday)%7]+"</li>";for(u=0;k>u;u++)s=[],r="",m=a,n=b,o=u-j+1,0>=o?(s.push("other"),1>=n?(m--,n=12,o=f[11]+o):(n--,o=f[e-1]+o)):o>f[e]&&(s.push("other"),n>=12?(m++,n=1,o-=f[0]):(n++,o-=f[e])),l=new Date(m,n-1,o),p=l.getTime(),q=[m,n,o].join("-"),q===c.cacheDate.txt?s.push("selected"):q===i&&s.push("now"),u%7===c.settings.saturday?s.push("sat"):u%7===c.settings.sunday&&s.push("sun"),p<c.minDate.time||p>c.maxDate.time?s.push("del"):Array.isArray(c.settings.disableWeek)&&c.settings.disableWeek.length&&c.settings.disableWeek.indexOf((u+c.settings.wday)%7)>=0?s.push("del"):Array.isArray(c.settings.disableDay)&&c.settings.disableDay.length&&(c.settings.disableDay.indexOf(String(o))>=0||c.settings.disableDay.indexOf(n+"-"+o)>=0||c.settings.disableDay.indexOf(m+"-"+n+"-"+o)>=0)&&s.push("del"),c.holiday&&("string"==typeof c.holiday["M"+n+"-"+o]?(s.push("holiday"),r=c.holiday["M"+n+"-"+o]):"string"==typeof c.holiday["D"+m+"-"+n+"-"+o]&&(s.push("holiday"),r=c.holiday["D"+m+"-"+n+"-"+o])),t+="<li",s.length&&(t+=' class="'+s.join(" ")+'"'),-1===s.indexOf("del")&&(t+=' data-date="'+q+'"'),r.length&&(t+=' data-title="'+r+'"'),0===u%7&&(t+=' data-week-num="'+c.getWeekNum(l)+'"'),t+=">"+o+"</li>";c.dom.dateSet.html(t),c.dom.yearSelect.val(a),c.dom.monthSelect.val(b)}},b.buildTimes=function(){var e,f,g,h,i,a=this,b="",c="",d="";for(i=0;24>i;i+=a.settings.hourStep)i<=a.defDate.hour&&(e=i),h=10>i?"0"+String(i):i,b+='<option value="'+h+'">'+h+"</option>";for(i=0;60>i;i+=a.settings.minuteStep)i<=a.defDate.mint&&(f=i),h=10>i?"0"+String(i):i,c+='<option value="'+h+'">'+h+"</option>";for(i=0;60>i;i+=a.settings.secondStep)i<=a.defDate.secs&&(g=i),h=10>i?"0"+String(i):i,d+='<option value="'+h+'">'+h+"</option>";e=a.fillLeadZero(e,2),f=a.fillLeadZero(f,2),g=a.fillLeadZero(g,2),a.dom.hourSelect.html(b).val(e),a.dom.mintSelect.html(c).val(f),a.dom.secsSelect.html(d).val(g),a.dom.main.append(a.dom.timeSet)},b.buildMonths=function(a){var e,f,h,i,j,k,b=this,c=1,d=12,g="";if(b.isInteger(a)){for(h=new Date,i=[h.getFullYear(),h.getMonth()+1].join("-"),j=[b.cacheDate.year,b.cacheDate.month].join("-"),k=c;d>=k;k++)f=a+"-"+k,e=[],f===i&&e.push("now"),f===j&&e.push("selected"),(a===b.minDate.year&&k<b.minDate.month||a===b.maxDate.year&&k>b.maxDate.month)&&e.push("del"),g+="<li",e.length&&(g+=' class="'+e.join(" ")+'"'),-1===e.indexOf("del")&&(g+=' data-date="'+f+'"'),g+=">"+b.language.monthList[k-1]+"</li>";b.dom.dateSet.html(g)}},b.buildYears=function(a){var d,e,f,h,i,j,k,b=this,c=b.minDate.year,g="";if(b.isInteger(a)){for(h=parseInt(b.dom.yearSelect.val(),10),i=new Date,j=i.getFullYear(),a<b.minDate.year?c=b.minDate.year:a>b.maxDate.year&&(c=b.maxDate.year),c=10*Math.floor(c/10),e=a-c,e>=b.settings.yearNum&&(c+=Math.floor(e/b.settings.yearNum)*b.settings.yearNum),d=c+b.settings.yearNum-1,d>b.maxDate.year&&(d=b.maxDate.year),h!==c&&b.dom.yearSelect.val(c),k=c;d>=k;k++)f=[],k===j&&f.push("now"),k===b.cacheDate.year&&f.push("selected"),k<b.minDate.year&&f.push("del"),g+="<li",f.length&&(g+=' class="'+f.join(" ")+'"'),-1===f.indexOf("del")&&(g+=' data-date="'+k+'"'),g+=">"+k+"</li>";b.dom.dateSet.html(g)}},b.gotoPrev=function(){var b,a=this;switch(a.settings.type){case"date":case"datetime":b=a.dom.monthSelect[0].selectedIndex,b>0?(a.dom.monthSelect[0].selectedIndex-=1,a.dom.monthSelect.trigger("change")):0===b&&a.dom.yearSelect[0].selectedIndex>0&&(a.dom.yearSelect[0].selectedIndex-=1,a.rebulidMonthSelect(),a.dom.monthSelect[0].selectedIndex=a.dom.monthSelect[0].length-1,a.dom.monthSelect.trigger("change"));break;case"month":case"year":a.dom.yearSelect[0].selectedIndex>0&&(a.dom.yearSelect[0].selectedIndex-=1,a.dom.yearSelect.trigger("change"))}},b.gotoNext=function(){var b,c,a=this;switch(a.settings.type){case"date":case"datetime":b=a.dom.monthSelect[0].selectedIndex,c=a.dom.monthSelect[0].length-1,c>b?(a.dom.monthSelect[0].selectedIndex+=1,a.dom.monthSelect.trigger("change")):b===c&&a.dom.yearSelect[0].selectedIndex<a.dom.yearSelect[0].length-1&&(a.dom.yearSelect[0].selectedIndex+=1,a.rebulidMonthSelect(),a.dom.monthSelect[0].selectedIndex=0,a.dom.monthSelect.trigger("change"));break;case"month":case"year":a.dom.yearSelect[0].selectedIndex<a.dom.yearSelect[0].length-1&&(a.dom.yearSelect[0].selectedIndex+=1,a.dom.yearSelect.trigger("change"))}},b.gotoDate=function(a){var e,f,g,b=this,c=parseInt(b.dom.yearSelect.val(),10),d=parseInt(b.dom.monthSelect.val(),10);switch(void 0===a?(f=c,g=d):(e=b.parseDate(a,!0),f=e.getFullYear(),g=e.getMonth()+1,(f!==c||g!==d)&&(b.rebulidMonthSelect(),b.dom.monthSelect.val(g))),b.settings.type){case"date":case"datetime":b.buildDays(f,g);break;case"month":b.buildMonths(f);break;case"year":b.buildYears(f)}},b.getDate=function(a){var b=this,c=b.cacheInput.val();return"string"==typeof a&&a.length||(a=b.settings.format),c=b.formatDate(a,c)},b.setDate=function(a){var g,h,b=this,c=b.parseDate(a);b.isDateObject(c)&&(c.getFullYear(),c.getMonth()+1,c.getDate(),g=c.getTime(),g<b.minDate.time?g=b.minDate.time:g>b.maxDate.time&&(g=b.maxDate.time),h=b.formatDate(b.settings.format,g),b.cacheInput.val(h).trigger("change"))},b.clearDate=function(){var a=this;a.cacheInput.val("")},b.showPane=function(){var a=this,b=a.settings.position,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,d=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=a.dom.pane.width(),f=a.dom.pane.height(),g=a.cacheInput[0].getBoundingClientRect(),h=g.top,i=g.left,j=g.width,k=g.height,l=h+window.pageYOffset-document.documentElement.clientTop,m=i+window.pageXOffset-document.documentElement.clientLeft,n=h+k+f>d?l-f:l+k,o=i+e>c?m-e+j:m;if("string"==typeof b&&b.length)switch(b){case"fixed":n=null,o=null;break;case"top":n=l-f;break;case"bottom":n=l+k;break;case"left":case"right":n=h+k+f>d?l+k-f:l,o="left"===b?m-e:m+j}"number"==typeof n&&"number"==typeof o&&a.dom.pane.css({top:n,left:o}),a.dom.pane.addClass("show"),a.dom.blockBg.addClass("show")},b.hidePane=function(){var a=this;a.dom.pane.removeClass("show"),a.dom.blockBg.removeClass("show"),a.delayHide=setTimeout(function(){a.dom.pane.removeAttr("style")},300)},b.show=function(a,b){var d,e,c=this;c.delayHide&&clearTimeout(c.delayHide),c.isPlainObject(b)||(b={}),c.cacheDate={},c.cacheInput=a,d=c.cacheInput.val(),d&&d.length&&(e=c.parseDate(d),c.isDateObject(e)&&(b.date=d,c.cacheDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()},c.cacheDate.txt=[c.cacheDate.year,c.cacheDate.month,c.cacheDate.day].join("-"))),c.setOptions(b),c.buildPane(),c.showPane()},a.cxCalendar=function(){var d,e,f,h,i,j,k,l,g=!1;for(h=0,i=arguments.length;i>h;h++)b.isJquery(arguments[h])||b.isZepto(arguments[h])?d=arguments[h]:b.isElement(arguments[h])?d=a(arguments[h]):"function"==typeof arguments[h]?f=arguments[h]:"object"==typeof arguments[h]?e=arguments[h]:"boolean"==typeof arguments[h]&&(g=arguments[h]);if(d.length){if(j={startDate:d.data("startDate"),endDate:d.data("endDate"),type:d.data("type"),format:d.data("format"),wday:d.data("wday"),yearNum:d.data("yearNum"),hourStep:d.data("hourStep"),minuteStep:d.data("minuteStep"),secondStep:d.data("secondStep"),disableWeek:d.data("disableWeek"),disableDay:d.data("disableDay"),position:d.data("position"),baseClass:d.data("baseClass"),language:d.data("language")},1===parseInt(d.data("lockRow"),10)&&(j.lockRow=!0),"string"==typeof j.disableWeek&&j.disableWeek.length&&/^[\d\,]+$/.test(j.disableWeek))for(j.disableWeek=j.disableWeek.split(","),h=0,i=j.disableWeek.length;i>h;h++)j.disableWeek[h]=parseInt(j.disableWeek[h],10);else j.disableWeek=void 0;j.disableDay="string"==typeof j.disableDay&&j.disableDay.length&&/^[\d\-\,]+$/.test(j.disableDay)?j.disableDay.split(","):void 0;for(k in j)void 0===j[k]&&delete j[k];return e=a.extend({},a.cxCalendar.defaults,e,j),g?d.on("focus",function(){b.show(d,e)}):b.show(d,e),"function"==typeof f&&(l=function(c,d){return{setOptions:function(b){d=a.extend(d,b)},show:function(){b.show(c,d)},hide:function(){b.hidePane()},getDate:function(a){return b.cacheInput=c,b.getDate(a)},setDate:function(a){b.cacheInput=c,b.setOptions(d),b.setDate(a)},clearDate:function(){b.cacheInput=c,b.clearDate()}}},f(l(d,e))),this}},a.cxCalendar.defaults={startDate:void 0,endDate:void 0,date:void 0,type:"date",format:"Y-m-d",wday:0,lockRow:!1,yearNum:20,hourStep:1,minuteStep:1,secondStep:1,disableWeek:[],disableDay:[],position:void 0,baseClass:void 0,language:void 0},a.cxCalendar.languages={"default":{monthList:["1","2","3","4","5","6","7","8","9","10","11","12"],weekList:["日","一","二","三","四","五","六"],holiday:[]}},a.fn.cxCalendar=function(b,c){return this.each(function(){a.cxCalendar(this,b,c,!0)}),this},b.init()});


/*!
 * jQuery cxDialog
 * 
 * @version 1.3.0
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxDialog
 * @license Released under the MIT license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){var b={dom:{},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isJquery:function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},isZepto:function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1}};b.init=function(){var b=this;b.dom.wrap=a("<div></div>",{id:"cxdialog","class":"cxdialog"}),b.dom.box=a("<div></div>",{"class":"box"}),b.dom.mask=a("<div></div>",{"class":"mask"}),b.dom.holder=a("<div></div>",{"class":"cxdialog_holder"}),b.dom.wrap.append(b.dom.mask).append(b.dom.box),b.dom.mask.on("click",function(){this.dataset.close&&b.exit()}),b.dom.wrap.on("click","a",function(){var e,f,g,a=this,c=a.rel,d=a.rev;if("cxdialog"===c){if(event.preventDefault(),"close"===d)b.exit();else if(Array.isArray(b.btnCache)&&b.btnCache.length)for(f=0,g=b.btnCache.length;g>f;f++)if(b.btnCache[f].name===d&&"function"==typeof b.btnCache[f].callback){e=b.btnCache[f].callback();break}e!==!1&&b.exit()}}),document.addEventListener("DOMContentLoaded",function(){b.dom.wrap.appendTo("body")})},b.setOptions=function(b,c,d){var e=this;if("string"==typeof b||e.isElement(b)||e.isJquery(b)||e.isZepto(b))b={info:b};else if("object"!=typeof b)return;"function"==typeof c&&(b.ok=c),"function"==typeof d&&(b.no=d),b=a.extend({},a.cxDialog.defaults,b),e.dom.wrap.attr("class","cxdialog"),e.setContent(b),e.show(b)},b.setContent=function(b){var f,g,h,i,c=this,d="",e=(new Date).getTime();for(c.dom.box.empty(),b.maskClose&&c.dom.mask.data("close",1),"string"==typeof b.title&&b.title.length&&(d+='<div class="title">'+b.title+"</div>"),c.backDom(),"string"==typeof b.info&&b.info.length?d+='<div class="info">'+b.info+"</div>":c.isElement(b.info)||c.isJquery(b.info)||c.isZepto(b.info)?(c.infoCache={dom:c.isElement(b.info)?a(b.info):b.info},f=c.infoCache.dom.css(["display","visibility","position","float","flex","margin","padding","borderWidth"]),g=c.infoCache.dom.attr("style"),c.dom.holder.css({display:f.display,visibility:f.visibility,position:f.position,"float":f.float,flex:f.flex,padding:f.padding,margin:f.margin,borderWidth:f.borderWidth,borderStyle:"solid",borderColor:"transparent",width:c.infoCache.dom.width(),height:c.infoCache.dom.height()}).insertAfter(c.infoCache.dom),"string"==typeof g&&g.length&&(c.infoCache.styleText=g),c.infoCache.dom.css("display","block").appendTo(c.dom.box)):d+='<div class="info">'+String(b.info)+"</div>",c.btnCache=[],"function"==typeof b.ok&&c.btnCache.push({name:"btn_ok",className:"btn_ok",text:b.okText,callback:b.ok}),"function"==typeof b.no&&c.btnCache.push({name:"btn_no",className:"btn_no",text:b.noText,callback:b.no}),h=0,i=b.buttons.length;i>h;h++)c.btnCache.push({name:"btn_"+e+"_"+h,className:"btn_"+h,text:b.buttons[h].text,callback:b.buttons[h].callback});if(c.btnCache.length){for(d+='<div class="btns">',h=0,i=c.btnCache.length;i>h;h++)d+='<a class="'+c.btnCache[h].className+'" rel="cxdialog" rev="'+c.btnCache[h].name+'">'+c.btnCache[h].text+"</a>";d+="</div>"}d+='<a class="close" rel="cxdialog" rev="close"></a>',c.dom.box.html(d),c.infoCache&&c.dom.box.find(".btns").before(c.infoCache.dom)},b.show=function(a){var b=this;"string"==typeof a.baseClass&&a.baseClass.length&&b.dom.wrap.addClass(a.baseClass),b.dom.wrap.addClass("in"),document.body.classList.add("cxdialog_lock")},b.exit=function(){var a=this;a.backDom(),a.btnCache=null,a.dom.wrap.removeClass("in").addClass("out"),document.body.classList.remove("cxdialog_lock")},b.backDom=function(){var a=this;a.infoCache&&(a.isJquery(a.infoCache.dom)||a.isZepto(a.infoCache.dom))&&("string"==typeof a.infoCache.styleText&&a.infoCache.styleText.length?a.infoCache.dom.attr("style",a.infoCache.styleText):a.infoCache.dom.removeAttr("style"),a.infoCache.dom.insertAfter(a.dom.holder),a.dom.holder.remove().removeAttr("style")),a.infoCache=null},a.cxDialog=function(){b.setOptions.apply(b,arguments)},a.cxDialog.close=function(){b.exit.apply(b)},a.cxDialog.defaults={title:"",info:"",ok:null,okText:"确 定",no:null,noText:"取 消",buttons:[],baseClass:"",maskClose:!0},b.init()});


/*!
 * jQuery cxSelect
 * @name jquery.cxselect.js
 * @version 1.4.2
 * @date 2017-09-26
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxSelect
 * @license Released under the MIT license
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto||window.$)}(function(a){var b=function(){var d,e,f,g,h,i;for(g=0,h=arguments.length;h>g;g++)b.isJquery(arguments[g])||b.isZepto(arguments[g])?d=arguments[g]:b.isElement(arguments[g])?d=a(arguments[g]):"function"==typeof arguments[g]?f=arguments[g]:"object"==typeof arguments[g]&&(e=arguments[g]);return i=new b.init(d,e),"function"==typeof f&&f(i),i};b.isElement=function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},b.isJquery=function(a){return a&&a.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&a instanceof jQuery?!0:!1},b.isZepto=function(a){return a&&a.length&&("function"==typeof Zepto||"object"==typeof Zepto)&&Zepto.zepto.isZ(a)?!0:!1},b.getIndex=function(a,b){return b?a:a-1},b.getData=function(a,b){if("string"==typeof b&&b.length){b=b.split(".");for(var c=0,d=b.length;d>c;c++)a=a[b[c]]}return a},b.init=function(c,d){var f,g,e=this;(b.isJquery(c)||b.isZepto(c))&&(f={dom:{box:c}},e.attach=b.attach.bind(f),e.detach=b.detach.bind(f),e.setOptions=b.setOptions.bind(f),e.clear=b.clear.bind(f),f.changeEvent=function(){b.selectChange.call(f,this.className)},f.settings=a.extend({},a.cxSelect.defaults,d,{url:f.dom.box.data("url"),emptyStyle:f.dom.box.data("emptyStyle"),required:f.dom.box.data("required"),firstTitle:f.dom.box.data("firstTitle"),firstValue:f.dom.box.data("firstValue"),jsonSpace:f.dom.box.data("jsonSpace"),jsonName:f.dom.box.data("jsonName"),jsonValue:f.dom.box.data("jsonValue"),jsonSub:f.dom.box.data("jsonSub")}),g=f.dom.box.data("selects"),"string"==typeof g&&g.length&&(f.settings.selects=g.split(",")),e.setOptions(),e.attach(),f.settings.url||f.settings.data?a.isArray(f.settings.data)?b.start.call(f,f.settings.data):"string"==typeof f.settings.url&&f.settings.url.length&&a.getJSON(f.settings.url,function(a){b.start.call(f,a)}):b.start.apply(f))},b.setOptions=function(c){var e,f,g,d=this;if(c&&a.extend(d.settings,c),(!a.isArray(d.selectArray)||!d.selectArray.length||c&&c.selects)&&(d.selectArray=[],a.isArray(d.settings.selects)&&d.settings.selects.length))for(f=0,g=d.settings.selects.length;g>f&&(e=d.dom.box.find("select."+d.settings.selects[f]),e&&e.length);f++)d.selectArray.push(e);c&&(!a.isArray(c.data)&&"string"==typeof c.url&&c.url.length?a.getJSON(d.settings.url,function(a){b.start.call(d,a)}):b.start.call(d,c.data))},b.attach=function(){var a=this;a.attachStatus||a.dom.box.on("change","select",a.changeEvent),"boolean"==typeof a.attachStatus&&b.start.call(a),a.attachStatus=!0},b.detach=function(){var a=this;a.dom.box.off("change","select",a.changeEvent),a.attachStatus=!1},b.clear=function(a){var d,e,b=this,c={display:"",visibility:""};for(a=isNaN(a)?0:a,d=a,e=b.selectArray.length;e>d;d++)b.selectArray[d].empty().prop("disabled",!0),"none"===b.settings.emptyStyle?c.display="none":"hidden"===b.settings.emptyStyle&&(c.visibility="hidden"),b.selectArray[d].css(c)},b.start=function(c){var e,f,d=this;if(a.isArray(c)&&(d.settings.data=b.getData(c,d.settings.jsonSpace)),d.selectArray.length){for(e=0,f=d.selectArray.length;f>e;e++)"string"!=typeof d.selectArray[e].attr("data-value")&&d.selectArray[e][0].options.length&&d.selectArray[e].attr("data-value",d.selectArray[e].val());d.settings.data||"string"==typeof d.selectArray[0].data("url")&&d.selectArray[0].data("url").length?b.getOptionData.call(d,0):d.selectArray[0][0].options.length&&"string"==typeof d.selectArray[0].attr("data-value")&&d.selectArray[0].attr("data-value").length?(d.selectArray[0].val(d.selectArray[0].attr("data-value")),b.getOptionData.call(d,1)):d.selectArray[0].prop("disabled",!1).css({display:"",visibility:""})}},b.getOptionData=function(c){var f,g,h,i,j,k,l,m,n,o,p,d=this;if(!("number"!=typeof c||isNaN(c)||0>c||c>=d.selectArray.length))if(f=d.selectArray[c],i=f.data("url"),j="undefined"==typeof f.data("jsonSpace")?d.settings.jsonSpace:f.data("jsonSpace"),k={},b.clear.call(d,c),"string"==typeof i&&i.length){if(c>0)for(o=0,p=1;c>o;o++,p++)l=d.selectArray[p].data("queryName"),m=d.selectArray[o].attr("name"),n=d.selectArray[o].val(),"string"==typeof l&&l.length?k[l]=n:"string"==typeof m&&m.length&&(k[m]=n);a.getJSON(i,k,function(a){g=b.getData(a,j),b.buildOption.call(d,c,g)})}else if(d.settings.data&&"object"==typeof d.settings.data){for(g=d.settings.data,o=0;c>o;o++){if(h=b.getIndex(d.selectArray[o][0].selectedIndex,"boolean"==typeof d.selectArray[o].data("required")?d.selectArray[o].data("required"):d.settings.required),"object"!=typeof g[h]||!a.isArray(g[h][d.settings.jsonSub])||!g[h][d.settings.jsonSub].length){g=null;break}g=g[h][d.settings.jsonSub]}b.buildOption.call(d,c,g)}},b.buildOption=function(b,c){var k,l,m,d=this,e=d.selectArray[b],f="boolean"==typeof e.data("required")?e.data("required"):d.settings.required,g="undefined"==typeof e.data("firstTitle")?d.settings.firstTitle:e.data("firstTitle"),h="undefined"==typeof e.data("firstValue")?d.settings.firstValue:e.data("firstValue"),i="undefined"==typeof e.data("jsonName")?d.settings.jsonName:e.data("jsonName"),j="undefined"==typeof e.data("jsonValue")?d.settings.jsonValue:e.data("jsonValue");if(a.isArray(c)){if(k=f?"":'<option value="'+String(h)+'">'+String(g)+"</option>","string"==typeof i&&i.length)for("string"==typeof j&&j.length||(j=i),l=0,m=c.length;m>l;l++)k+='<option value="'+String(c[l][j])+'">'+String(c[l][i])+"</option>";else for(l=0,m=c.length;m>l;l++)k+='<option value="'+String(c[l])+'">'+String(c[l])+"</option>";e.html(k).prop("disabled",!1).css({display:"",visibility:""}),"string"==typeof e.attr("data-value")&&(e.val(String(e.attr("data-value"))).removeAttr("data-value"),e[0].selectedIndex<0&&(e[0].options[0].selected=!0)),(f||e[0].selectedIndex>0)&&e.trigger("change")}},b.selectChange=function(a){var d,e,f,c=this;if("string"==typeof a&&a.length){for(a=a.replace(/\s+/g,","),a=","+a+",",e=0,f=c.selectArray.length;f>e;e++)if(a.indexOf(","+c.settings.selects[e]+",")>-1){d=e;break}"number"==typeof d&&d>-1&&(d+=1,b.getOptionData.call(c,d))}},a.cxSelect=function(){return b.apply(this,arguments)},a.cxSelect.defaults={selects:[],url:null,data:null,emptyStyle:null,required:!1,firstTitle:"请选择",firstValue:"",jsonSpace:"",jsonName:"n",jsonValue:"",jsonSub:"s"},a.fn.cxSelect=function(b,c){return this.each(function(){a.cxSelect(this,b,c)}),this}});


/*!
 * cxValidation
 * 
 * @version 1.1.0
 * @author ciaoca
 * @email ciaoca@gmail.com
 * @site https://github.com/ciaoca/cxValidation
 * @license Released under the MIT license
 */
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.cxValidation=b()}("undefined"!=typeof self?self:this,function(){"use strict";var b,a={validMessage:{titleSymbol:{before:"【",after:"】"},required:{input:"未填写",radio:"未选择",checkbox:"未勾选",select:"未选择"},groupRequired:{input:"至少填写 {{1}} 项",radio:"未选择",checkbox:"至少选择 {{1}} 项"},condRequired:{input:"未填写",radio:"未选择",checkbox:"未勾选",select:"未选择"},equals:"两次输入内容不一致",minSize:"最少 {{0}} 个字符",maxSize:"最多 {{0}} 个字符",min:"最小值为 {{0}}",max:"最大值为 {{0}}",integer:"无效的整数",number:"无效的数值",onlyNumber:"只能填写数字",onlyNumberSp:"只能填写数字和空格",onlyLetter:"只能填写英文字母",onlyLetterSp:"只能填写英文字母和空格",onlyLetterNumber:"只能填写英文字母与数字",onlyLetterNumberSp:"只能填写英文字母、数字、空格",email:"无效的邮件地址",phone:"无效的电话号码",url:"无效的网址",chinese:"只能填写中文汉字",chinaId:"无效的身份证号码",chinaIdLoose:"无效的身份证号码",chinaZip:"无效的邮政编码",qq:"无效的 QQ 号码"},result:{status:!0},vid:1,formFuns:{},groupCache:{},isElement:function(a){return a&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&a instanceof HTMLElement?!0:a&&a.nodeType&&1===a.nodeType?!0:!1},isHidden:function(a){if(this.isElement(a)){var b=window.getComputedStyle(a);return"none"===b.getPropertyValue("display")||"hidden"===b.getPropertyValue("visibility")||0==b.getPropertyValue("opacity")||0==b.getPropertyValue("width")&&0==b.getPropertyValue("height")?!0:!1}return!0},isVisible:function(a){return!this.isHidden(a)}};return a.init=function(){var a=this;a.defaults={success:function(a){a.form.submit()},error:function(b){var c=b.element.nodeName.toLowerCase();"required"===b.rule||"condRequired"===b.rule?"input"===c&&["radio","checkbox","color","range","file","hidden"].indexOf(b.element.type)>=0?a.toMessage(b.message):a.toFocus(b.element):a.toMessage(b.message)}}},a.validFun={required:function(a){return"checkbox"===a.type||"radio"===a.type?a.checked?!0:!1:a.value.trim().length?!0:!1},groupRequired:function(a,b,c){var d=this;return b=String(b),c=parseInt(c,10),isNaN(c)&&(c=1),("undefined"==typeof d.groupCache[b]||"undefined"==typeof d.groupCache[b].count)&&(d.groupCache[b]={count:c}),d.groupCache[b].count>0&&(d.validFun.required(a)?d.groupCache[b].count-=1:"undefined"==typeof d.groupCache[b].element&&(d.groupCache[b].element=a)),!0},condRequired:function(a,b,c){var g,h,d=this,e=!1,f=!0;if("string"==typeof b&&b.length){if(b.indexOf(",")>0){if(b=b.split(","),Array.isArray(b)&&b.length)for(e=!0,g=0,h=b.length;h>g;g++)if(!d.validFun.required(document.getElementById(b[g]))){e=!1;break}}else"string"==typeof c?document.getElementById(b).value===c&&(e=!0):d.validFun.required(document.getElementById(b))&&(e=!0);e&&(f=d.validFun.required(a))}return f},equals:function(a,b){return a.value==document.getElementById(b).value},minSize:function(a,b){return a.value.length?a.value.length>=b:!0},maxSize:function(a,b){return a.value.length?a.value.length<=b:!0},min:function(a,b){return a.value.length?parseFloat(a.value)>=b:!0},max:function(a,b){return a.value.length?parseFloat(a.value)<=b:!0},integer:function(a){return a.value.length?/^[\-\+]?\d+$/.test(a.value):!0},number:function(a){return a.value.length?/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/.test(a.value):!0},onlyNumber:function(a){return a.value.length?/^[0-9]+$/.test(a.value):!0},onlyNumberSp:function(a){return a.value.length?/^[0-9\ ]+$/.test(a.value):!0},onlyLetter:function(a){return a.value.length?/^[a-zA-Z]+$/.test(a.value):!0},onlyLetterSp:function(a){return a.value.length?/^[a-zA-Z\ ]+$/.test(a.value):!0},onlyLetterNumber:function(a){return a.value.length?/^[0-9a-zA-Z]+$/.test(a.value):!0},onlyLetterNumberSp:function(a){return a.value.length?/^[0-9a-zA-Z\ ]+$/.test(a.value):!0},email:function(a){return a.value.length?/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a.value):!0},phone:function(a){return a.value.length?/^([\+][0-9]{1,3}[ \.\-])?([\(]{1}[0-9]{2,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/.test(a.value):!0},url:function(a){return a.value.length?/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a.value):!0},chinese:function(a){return a.value.length?/^[\u4E00-\u9FA5]+$/.test(a.value):!0},chinaId:function(a){return a.value.length?/^[1-9]\d{5}[1-9]\d{3}(((0[13578]|1[02])(0[1-9]|[12]\d|3[0-1]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))(\d{4}|\d{3}[xX])$/.test(a.value):!0},chinaIdLoose:function(a){return a.value.length?/^(\d{18}|\d{15}|\d{17}[xX])$/.test(a.value):!0},chinaZip:function(a){return a.value.length?/^\d{6}$/.test(a.value):!0},qq:function(a){return a.value.length?/^[1-9]\d{4,10}$/.test(a.value):!0},call:function(){var a=Array.prototype.slice.call(arguments),b=a.splice(1,1),c=window;if(b.indexOf(".")>=0)for(b=b.split(".");b.length;)c=c[b.shift()];else c=c[b];return"function"==typeof c?c.apply(c,a):!0}},a.getRuleArguments=function(a,b){var e,c=a.dataset.validation,d=[],f=[];return"string"==typeof c&&c.length&&(d=c.replace(/\s|\[[^\]]*\]/g,"").split(",")),"string"==typeof b&&b.length&&d.indexOf(b)>=0&&(e=c.match(new RegExp(b+"((\\[[^\\]]+\\])+)")),Array.isArray(e)&&e.length>1&&(f=e[1].match(/([^\[\]]+)/g),Array.isArray(f)&&1===f.length&&"groupRequired"===b&&(f[1]=1))),f},a.getMessage=function(a,b){var f,h,i,c=this,d=a.nodeName.toLowerCase(),e="";if("string"==typeof a.dataset.validationMessage&&a.dataset.validationMessage.length)try{e=JSON.parse(a.dataset.validationMessage),"string"==typeof e[b]&&e[b].length&&(e=e[b])}catch(g){e=a.dataset.validationMessage}else("string"==typeof c.validMessage[b]||"object"==typeof c.validMessage[b])&&("string"==typeof c.validMessage[b]?e=c.validMessage[b]:"input"===d?"radio"===a.type&&"string"==typeof c.validMessage[b].radio?e=c.validMessage[b].radio:"checkbox"===a.type&&"string"==typeof c.validMessage[b].checkbox?e=c.validMessage[b].checkbox:"string"==typeof c.validMessage[b].input&&(e=c.validMessage[b].input):"select"===d&&"string"==typeof c.validMessage[b].select?e=c.validMessage[b].select:"string"==typeof c.validMessage[b].input&&(e=c.validMessage[b].input),e.length&&"string"==typeof a.dataset.validationTitle&&a.dataset.validationTitle.length&&(e=c.validMessage.titleSymbol.before+a.dataset.validationTitle+c.validMessage.titleSymbol.after+e));if(e.length)for(f=c.getRuleArguments(a,b),h=0,i=f.length;i>h;h++)e=e.replace(new RegExp("\\{\\{"+h+"\\}\\}"),f[h]);return e},a.validItem=function(a,b){var g,h,i,j,k,c=this,d=Object.assign({},c.result),e=a.dataset.validation,f=[];if(b=Object.assign({},b),"string"==typeof e&&e.length)for(f=e.replace(/\s|\[[^\]]*\]/g,"").split(","),j=0,k=f.length;k>j;j++)if(i=f[j],"function"==typeof c.validFun[i]&&(g=e.match(new RegExp(i+"((\\[[^\\]]+\\])+)")),h=[a],Array.isArray(g)&&g.length>1&&(h=h.concat(g[1].match(/([^\[\]]+)/g))),d=c.validFun[i].apply(c,h),"boolean"==typeof d&&(d={status:d}),"object"==typeof d&&"boolean"==typeof d.status&&d.status===!1)){d.rule=i,"string"==typeof d.message&&d.message.length||(d.message=c.getMessage(a,i));break}return d.element=a,"function"==typeof b.complete&&b.complete(d),d.status===!0&&"function"==typeof b.success?b.success(d):d.status===!1&&"function"==typeof b.error&&b.error(d),d},a.validForm=function(a,b){var e,f,g,h,i,c=this,d=Object.assign({},c.result);for(b=Object.assign({},b),e=a.querySelectorAll("input,textarea,select"),c.groupCache={},f=0,g=e.length;g>f;f++)if(h=c.validItem(e[f]),h&&h.status===!1){d.status=!1,d.element=e[f],"string"==typeof h.rule&&h.rule.length&&(d.rule=h.rule),"string"==typeof h.message&&h.message.length&&(d.message=h.message);break}if(d&&d.status===!0)for(i in c.groupCache)if(c.groupCache[i].count>0){d.status=!1,d.rule="groupRequired",d.element=c.groupCache[i].element,d.message=c.getMessage(d.element,d.rule);break}return d.form=a,c.groupCache={},"function"==typeof b.complete&&b.complete(d),d.status===!0&&"function"==typeof b.success?b.success(d):d.status===!1&&"function"==typeof b.error&&b.error(d),d},a.formSubmitFn=function(a,b){event.preventDefault(),this.validForm(a,Object.assign({},this.defaults,b))},a.toMessage=function(a){alert(a)},a.toFocus=function(a){this.isVisible(a)&&a.focus()},a.init(),b=function(){return b.valid.apply(b,arguments)},b.setOptions=function(b){Object.assign(a.defaults,b)},b.setLanguage=function(b){for(var c in b)"object"==typeof b[c]?a.validMessage.hasOwnProperty(c)?Object.assign(a.validMessage[c],b[c]):a.validMessage[c]=Object.assign({},b[c]):a.validMessage[c]=b[c]},b.valid=function(b,c){return a.isElement(b)?"form"===b.nodeName.toLowerCase()?a.validForm(b,c):a.validItem(b,c):void 0},b.verify=function(b,c){c=Object.assign({},a.defaults,c),this.valid(b,c)},b.attach=function(){var c,e,f,g,d={};for(f=0,g=arguments.length;g>f;f++)a.isElement(arguments[f])?c=arguments[f]:"object"==typeof arguments[f]&&(d=Object.assign(d,arguments[f]));return a.isElement(c)&&c.nodeName&&"form"===c.nodeName.toLowerCase()?(e=c.dataset.cxVid,"function"!=typeof a.formFuns[e]?(e="cxValid_"+a.vid,c.dataset.cxVid=e,a.vid++):c.removeEventListener("submit",a.formFuns[e]),a.formFuns[e]=a.formSubmitFn.bind(a,c,d),c.addEventListener("submit",a.formFuns[e]),void 0):(console.warn("[cxValidation] Not form element."),void 0)},b.detach=function(b){var d;a.isElement(b)&&b.nodeName&&"form"===b.nodeName.toLowerCase()&&(d=b.dataset.cxVid,delete b.dataset.cxVid,d&&"function"==typeof a.formFuns[d]&&(b.removeEventListener("submit",a.formFuns[d]),delete a.formFuns[d]))},b});


// Day.js
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",f="month",h="quarter",c="year",d="date",$="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},D="en",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if("string"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+"Hours",0);case u:return l(g+"Minutes",1);case s:return l(g+"Seconds",2);case i:return l(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h="set"+(this.$u?"UTC":""),$=(n={},n[a]=h+"Date",n[d]=h+"Date",n[f]=h+"Month",n[c]=h+"FullYear",n[u]=h+"Hours",n[s]=h+"Minutes",n[i]=h+"Seconds",n[r]=h+"Milliseconds",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},c=function(t){return O.s(s%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,"0"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",f],["$y",c],["$D",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));

// dayjs/local/zh-cn
!function(e,_){"object"==typeof exports&&"undefined"!=typeof module?module.exports=_(require("dayjs")):"function"==typeof define&&define.amd?define(["dayjs"],_):(e="undefined"!=typeof globalThis?globalThis:e||self).dayjs_locale_zh_cn=_(e.dayjs)}(this,(function(e){"use strict";function _(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=_(e),d={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,_){switch(_){case"W":return e+"周";default:return e+"日"}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,_){var t=100*e+_;return t<600?"凌晨":t<900?"早上":t<1100?"上午":t<1300?"中午":t<1800?"下午":"晚上"}};return t.default.locale(d,null,!0),d}));


/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Notyf=function(){"use strict";var e,o=function(){return(o=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var o in i=arguments[e])Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);return t}).apply(this,arguments)},n=(t.prototype.on=function(t,i){var e=this.listeners[t]||[];this.listeners[t]=e.concat([i])},t.prototype.triggerEvent=function(t,i){var e=this;(this.listeners[t]||[]).forEach(function(t){return t({target:e,event:i})})},t);function t(t){this.options=t,this.listeners={}}(i=e=e||{})[i.Add=0]="Add",i[i.Remove=1]="Remove";var f,i,s=(a.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,e.Add,this.notifications)},a.prototype.splice=function(t,i){i=this.notifications.splice(t,i)[0];return this.updateFn(i,e.Remove,this.notifications),i},a.prototype.indexOf=function(t){return this.notifications.indexOf(t)},a.prototype.onUpdate=function(t){this.updateFn=t},a);function a(){this.notifications=[]}(i=f=f||{}).Dismiss="dismiss";var r={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!(i.Click="click")},c=(p.prototype.on=function(t,i){var e;this.events=o(o({},this.events),((e={})[t]=i,e))},p.prototype.update=function(t,i){i===e.Add?this.addNotification(t):i===e.Remove&&this.removeNotification(t)},p.prototype.removeNotification=function(t){var i,e,n=this,t=this._popRenderedNotification(t);t&&((e=t.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,i=function(t){t.target===e&&(e.removeEventListener(n.animationEndEventName,i),n.container.removeChild(e))}))},p.prototype.addNotification=function(t){var i=this._renderNotification(t);this.notifications.push({notification:t,node:i}),this._announce(t.options.message||"Notification")},p.prototype._renderNotification=function(t){var i=this._buildNotificationCard(t),e=t.options.className;return e&&(t=i.classList).add.apply(t,e.split(" ")),this.container.appendChild(i),i},p.prototype._popRenderedNotification=function(t){for(var i=-1,e=0;e<this.notifications.length&&i<0;e++)this.notifications[e].notification===t&&(i=e);if(-1!==i)return this.notifications.splice(i,1)[0]},p.prototype.getXPosition=function(t){return(null===(t=null==t?void 0:t.position)||void 0===t?void 0:t.x)||"right"},p.prototype.getYPosition=function(t){return(null===(t=null==t?void 0:t.position)||void 0===t?void 0:t.y)||"bottom"},p.prototype.adjustContainerAlignment=function(t){var i=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],e=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],t=this.container.style;t.setProperty("justify-content",e),t.setProperty("align-items",i)},p.prototype._buildNotificationCard=function(n){var o=this,t=n.options,i=t.icon;this.adjustContainerAlignment(t);var e=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),s=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),a=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),r=this._createHTMLElement({tagName:"div",className:"notyf__message"});r.innerHTML=t.message||"";var c,p,d,l,u=t.background||t.backgroundColor;i&&(c=this._createHTMLElement({tagName:"div",className:"notyf__icon"}),("string"==typeof i||i instanceof String)&&(c.innerHTML=new String(i).valueOf()),"object"==typeof i&&(p=i.tagName,d=i.className,l=i.text,i=void 0===(i=i.color)?u:i,l=this._createHTMLElement({tagName:void 0===p?"i":p,className:d,text:l}),i&&(l.style.color=i),c.appendChild(l)),a.appendChild(c)),a.appendChild(r),e.appendChild(a),u&&(t.ripple?(s.style.background=u,e.appendChild(s)):e.style.background=u),t.dismissible&&(s=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),u=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"}),s.appendChild(u),a.appendChild(s),e.classList.add("notyf__toast--dismissible"),u.addEventListener("click",function(t){var i,e;null!==(e=(i=o.events)[f.Dismiss])&&void 0!==e&&e.call(i,{target:n,event:t}),t.stopPropagation()})),e.addEventListener("click",function(t){var i,e;return null===(e=(i=o.events)[f.Click])||void 0===e?void 0:e.call(i,{target:n,event:t})});t="top"===this.getYPosition(t)?"upper":"lower";return e.classList.add("notyf__toast--"+t),e},p.prototype._createHTMLElement=function(t){var i=t.tagName,e=t.className,t=t.text,i=document.createElement(i);return e&&(i.className=e),i.textContent=t||null,i},p.prototype._createA11yContainer=function(){var t=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},p.prototype._announce=function(t){var i=this;this.a11yContainer.textContent="",setTimeout(function(){i.a11yContainer.textContent=t},100)},p.prototype._getAnimationEndEventName=function(){var t,i=document.createElement("_fake"),e={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in e)if(void 0!==i.style[t])return e[t];return"animationend"},p);function p(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),i=this._createHTMLElement({tagName:"div",className:"notyf"});t.appendChild(i),document.body.appendChild(t),this.container=i,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}function d(t){var e=this;this.dismiss=this._removeNotification,this.notifications=new s,this.view=new c;var i=this.registerTypes(t);this.options=o(o({},r),t),this.options.types=i,this.notifications.onUpdate(function(t,i){return e.view.update(t,i)}),this.view.on(f.Dismiss,function(t){var i=t.target,t=t.event;e._removeNotification(i),i.triggerEvent(f.Dismiss,t)}),this.view.on(f.Click,function(t){var i=t.target,t=t.event;return i.triggerEvent(f.Click,t)})}return d.prototype.error=function(t){t=this.normalizeOptions("error",t);return this.open(t)},d.prototype.success=function(t){t=this.normalizeOptions("success",t);return this.open(t)},d.prototype.open=function(i){var t=this.options.types.find(function(t){return t.type===i.type})||{},t=o(o({},t),i);this.assignProps(["ripple","position","dismissible"],t);t=new n(t);return this._pushNotification(t),t},d.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},d.prototype.assignProps=function(t,i){var e=this;t.forEach(function(t){i[t]=(null==i[t]?e.options:i)[t]})},d.prototype._pushNotification=function(t){var i=this;this.notifications.push(t);var e=(void 0!==t.options.duration?t:this).options.duration;e&&setTimeout(function(){return i._removeNotification(t)},e)},d.prototype._removeNotification=function(t){t=this.notifications.indexOf(t);-1!==t&&this.notifications.splice(t,1)},d.prototype.normalizeOptions=function(t,i){t={type:t};return"string"==typeof i?t.message=i:"object"==typeof i&&(t=o(o({},t),i)),t},d.prototype.registerTypes=function(t){var i=(t&&t.types||[]).slice();return r.types.map(function(e){var n=-1;i.forEach(function(t,i){t.type===e.type&&(n=i)});var t=-1!==n?i.splice(n,1)[0]:{};return o(o({},e),t)}).concat(i)},d}();


/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
*/
function Swipe(a,b){"use strict";function m(){var c,d;for(g=f.children,j=g.length,g.length<2&&(b.continuous=!1),e.transitions&&b.continuous&&g.length<3&&(f.appendChild(g[0].cloneNode(!0)),f.appendChild(f.children[1].cloneNode(!0)),g=f.children),h=new Array(g.length),i=a.getBoundingClientRect().width||a.offsetWidth,f.style.width=g.length*i+"px",c=g.length;c--;)d=g[c],d.style.width=i+"px",d.setAttribute("data-index",c),e.transitions&&(d.style.left=c*-i+"px",r(c,k>c?-i:c>k?i:0,0));b.continuous&&e.transitions&&(r(p(k-1),-i,0),r(p(k+1),i,0)),e.transitions||(f.style.left=k*-i+"px"),a.style.visibility="visible"}function n(){b.continuous?q(k-1):k&&q(k-1)}function o(){b.continuous?q(k+1):k<g.length-1&&q(k+1)}function p(a){return(g.length+a%g.length)%g.length}function q(a,c){var f,j,m;if(k!=a){if(e.transitions){for(f=Math.abs(k-a)/(k-a),b.continuous&&(j=f,f=-h[p(a)]/i,f!==j&&(a=-f*g.length+a)),m=Math.abs(k-a)-1;m--;)r(p((a>k?a:k)-m-1),i*f,0);a=p(a),r(k,i*f,c||l),r(a,0,c||l),b.continuous&&r(p(a-f),-(i*f),0)}else a=p(a),t(k*-i,a*-i,c||l);k=a,d(b.callback&&b.callback(k,g[k]))}}function r(a,b,c){s(a,b,c),h[a]=b}function s(a,b,c){var d=g[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)"+"translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function t(a,c,d){var e,h;return d?(e=+new Date,h=setInterval(function(){var i=+new Date-e;return i>d?(f.style.left=c+"px",u&&w(),b.transitionEnd&&b.transitionEnd.call(event,k,g[k]),clearInterval(h),void 0):(f.style.left=(c-a)*(Math.floor(100*(i/d))/100)+a+"px",void 0)},4),void 0):(f.style.left=c+"px",void 0)}function w(){v=setTimeout(o,u)}function x(){u=0,clearTimeout(v)}var f,g,h,i,j,k,l,u,v,y,z,A,B,c=function(){},d=function(a){setTimeout(a||c,0)},e={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var c,b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))};if(a)return f=a.children[0],b=b||{},k=parseInt(b.startSlide,10)||0,l=b.speed||300,b.continuous=void 0!==b.continuous?b.continuous:!0,u=b.auto||0,y={},z={},B={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":d(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(a));break;case"resize":d(m)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=a.touches[0];y={x:b.pageX,y:b.pageY,time:+new Date},A=void 0,z={},f.addEventListener("touchmove",this,!1),f.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];z={x:c.pageX-y.x,y:c.pageY-y.y},"undefined"==typeof A&&(A=!!(A||Math.abs(z.x)<Math.abs(z.y))),A||(a.preventDefault(),x(),b.continuous?(s(p(k-1),z.x+h[p(k-1)],0),s(k,z.x+h[k],0),s(p(k+1),z.x+h[p(k+1)],0)):(z.x=z.x/(!k&&z.x>0||k==g.length-1&&z.x<0?Math.abs(z.x)/i+1:1),s(k-1,z.x+h[k-1],0),s(k,z.x+h[k],0),s(k+1,z.x+h[k+1],0)))}},end:function(){var j,c=+new Date-y.time,d=Number(c)<250&&Math.abs(z.x)>20||Math.abs(z.x)>i/2,e=!k&&z.x>0||k==g.length-1&&z.x<0;b.continuous&&(e=!1),j=z.x<0,A||(d&&!e?(j?(b.continuous?(r(p(k-1),-i,0),r(p(k+2),i,0)):r(k-1,-i,0),r(k,h[k]-i,l),r(p(k+1),h[p(k+1)]-i,l),k=p(k+1)):(b.continuous?(r(p(k+1),i,0),r(p(k-2),-i,0)):r(k+1,i,0),r(k,h[k]+i,l),r(p(k-1),h[p(k-1)]+i,l),k=p(k-1)),b.callback&&b.callback(k,g[k])):b.continuous?(r(p(k-1),-i,l),r(k,0,l),r(p(k+1),i,l)):(r(k-1,-i,l),r(k,0,l),r(k+1,i,l))),f.removeEventListener("touchmove",B,!1),f.removeEventListener("touchend",B,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==k&&(u&&w(),b.transitionEnd&&b.transitionEnd.call(a,k,g[k]))}},m(),u&&w(),e.addEventListener?(e.touch&&f.addEventListener("touchstart",B,!1),e.transitions&&(f.addEventListener("webkitTransitionEnd",B,!1),f.addEventListener("msTransitionEnd",B,!1),f.addEventListener("oTransitionEnd",B,!1),f.addEventListener("otransitionend",B,!1),f.addEventListener("transitionend",B,!1)),window.addEventListener("resize",B,!1)):window.onresize=function(){m()},{setup:function(){m()},slide:function(a,b){x(),q(a,b)},prev:function(){x(),n()},next:function(){x(),o()},stop:function(){x()},getPos:function(){return k},getNumSlides:function(){return j},kill:function(){var a,b;for(x(),f.style.width="",f.style.left="",a=g.length;a--;)b=g[a],b.style.width="",b.style.left="",e.transitions&&s(a,0,0);e.addEventListener?(f.removeEventListener("touchstart",B,!1),f.removeEventListener("webkitTransitionEnd",B,!1),f.removeEventListener("msTransitionEnd",B,!1),f.removeEventListener("oTransitionEnd",B,!1),f.removeEventListener("otransitionend",B,!1),f.removeEventListener("transitionend",B,!1),window.removeEventListener("resize",B,!1)):window.onresize=null}}}(window.jQuery||window.Zepto)&&function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);


/**
 * @fileoverview
 * - Using the 'QRCode for Javascript library'
 * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.
 * - this library has no dependencies.
 * 
 * @author davidshimjs
 * @see <a href="http://www.d-project.com/" target="_blank">http://www.d-project.com/</a>
 * @see <a href="http://jeromeetienne.github.com/jquery-qrcode/" target="_blank">http://jeromeetienne.github.com/jquery-qrcode/</a>
 */
var QRCode;!function(){function a(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=[],d=0,e=this.data.length;e>d;d++){var f=this.data.charCodeAt(d);f>65536?(b[0]=240|(1835008&f)>>>18,b[1]=128|(258048&f)>>>12,b[2]=128|(4032&f)>>>6,b[3]=128|63&f):f>2048?(b[0]=224|(61440&f)>>>12,b[1]=128|(4032&f)>>>6,b[2]=128|63&f):f>128?(b[0]=192|(1984&f)>>>6,b[1]=128|63&f):b[0]=f,this.parsedData=this.parsedData.concat(b)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function j(a,b){this.totalCount=a,this.dataCount=b}function k(){this.buffer=[],this.length=0}function m(){return"undefined"!=typeof CanvasRenderingContext2D}function n(){var a=!1,b=navigator.userAgent;return/android/i.test(b)&&(a=!0,aMat=b.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(a=parseFloat(aMat[1]))),a}function r(a,b){for(var c=1,e=s(a),f=0,g=l.length;g>=f;f++){var h=0;switch(b){case d.L:h=l[f][0];break;case d.M:h=l[f][1];break;case d.Q:h=l[f][2];break;case d.H:h=l[f][3]}if(h>=e)break;c++}if(c>l.length)throw new Error("Too long data");return c}function s(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;c>b;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=f.getBCHTypeInfo(c),e=0;15>e;e++){var g=!a&&1==(1&d>>e);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(var e=0;15>e;e++){var g=!a&&1==(1&d>>e);8>e?this.modules[8][this.moduleCount-e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var j=!1;g<a.length&&(j=1==(1&a[g]>>>e));var k=f.getMask(b,d,h-i);k&&(j=!j),this.modules[d][h-i]=j,e--,-1==e&&(g++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,d){for(var e=j.getRSBlocks(a,c),g=new k,h=0;h<d.length;h++){var i=d[h];g.put(i.mode,4),g.put(i.getLength(),f.getLengthInBits(i.mode,a)),i.write(g)}for(var l=0,h=0;h<e.length;h++)l+=e[h].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);0!=g.getLengthInBits()%8;)g.putBit(!1);for(;;){if(g.getLengthInBits()>=8*l)break;if(g.put(b.PAD0,8),g.getLengthInBits()>=8*l)break;g.put(b.PAD1,8)}return b.createBytes(g,e)},b.createBytes=function(a,b){for(var c=0,d=0,e=0,g=new Array(b.length),h=new Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),g[j]=new Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];c+=k;var n=f.getErrorCorrectPolynomial(l),o=new i(g[j],n.getLength()-1),p=o.mod(n);h[j]=new Array(n.getLength()-1);for(var m=0;m<h[j].length;m++){var q=m+p.getLength()-h[j].length;h[j][m]=q>=0?p.get(q):0}}for(var r=0,m=0;m<b.length;m++)r+=b[m].totalCount;for(var s=new Array(r),t=0,m=0;d>m;m++)for(var j=0;j<b.length;j++)m<g[j].length&&(s[t++]=g[j][m]);for(var m=0;e>m;m++)for(var j=0;j<b.length;j++)m<h[j].length&&(s[t++]=h[j][m]);return s};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;f.getBCHDigit(b)-f.getBCHDigit(f.G15)>=0;)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;f.getBCHDigit(b)-f.getBCHDigit(f.G18)>=0;)b^=f.G18<<f.getBCHDigit(b)-f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case e.PATTERN000:return 0==(b+c)%2;case e.PATTERN001:return 0==b%2;case e.PATTERN010:return 0==c%3;case e.PATTERN011:return 0==(b+c)%3;case e.PATTERN100:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case e.PATTERN101:return 0==b*c%2+b*c%3;case e.PATTERN110:return 0==(b*c%2+b*c%3)%2;case e.PATTERN111:return 0==(b*c%3+(b+c)%2)%2;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new i([1],0),c=0;a>c;c++)b=b.multiply(new i([1,g.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},g={glog:function(a){if(1>a)throw new Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;8>h;h++)g.EXP_TABLE[h]=1<<h;for(var h=8;256>h;h++)g.EXP_TABLE[h]=g.EXP_TABLE[h-4]^g.EXP_TABLE[h-5]^g.EXP_TABLE[h-6]^g.EXP_TABLE[h-8];for(var h=0;255>h;h++)g.LOG_TABLE[g.EXP_TABLE[h]]=h;i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new i(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return new i(c,0).mod(a)}},j.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j.getRSBlocks=function(a,b){var c=j.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],k=0;g>k;k++)e.push(new j(h,i));return e},j.getRsBlockTable=function(a,b){switch(b){case d.L:return j.RS_BLOCK_TABLE[4*(a-1)+0];case d.M:return j.RS_BLOCK_TABLE[4*(a-1)+1];case d.Q:return j.RS_BLOCK_TABLE[4*(a-1)+2];case d.H:return j.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}},k.prototype={get:function(a){var b=Math.floor(a/8);return 1==(1&this.buffer[b]>>>7-a%8)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(1&a>>>b-c-1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],o=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function g(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var b=this._htOption,c=this._el,d=a.getModuleCount();Math.floor(b.width/d),Math.floor(b.height/d),this.clear();var h=g("svg",{viewBox:"0 0 "+String(d)+" "+String(d),width:"100%",height:"100%",fill:b.colorLight});h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),c.appendChild(h),h.appendChild(g("rect",{fill:b.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;d>i;i++)for(var j=0;d>j;j++)if(a.isDark(i,j)){var k=g("use",{x:String(i),y:String(j)});k.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),h.appendChild(k)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),p="svg"===document.documentElement.tagName.toLowerCase(),q=p?o:m()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function d(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&_fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}c._bSupportDataURI===!0&&c._fSuccess?c._fSuccess.call(c):c._bSupportDataURI===!1&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var b=1/window.devicePixelRatio,c=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,d,e,f,g,h,i,j){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*b;else"undefined"==typeof j&&(arguments[1]*=b,arguments[2]*=b,arguments[3]*=b,arguments[4]*=b);c.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=n(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;e>j;j++)for(var k=0;e>k;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&d.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;d>h;h++){g.push("<tr>");for(var i=0;d>i;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();QRCode=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._android=n(),this._el=a,this._oQRCode=null,this._oDrawing=new q(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(a){this._oQRCode=new b(r(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=d}();


/**
 * Exif.js
 * A JavaScript library for reading EXIF meta data from JPEG image files.
 */
!function(){function i(a){return!!a.exifdata}function j(a,b){var c,d,e,f,g;for(b=b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gim,""),c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=0;d>g;g++)f[g]=c.charCodeAt(g);return e}function k(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(){(200==this.status||0===this.status)&&b(this.response)},c.send()}function l(b,c){function d(a){var d=m(a),e=o(a);b.exifdata=d||{},b.iptcdata=e||{},c&&c.call(b)}var e,f,g;b.src?/^data\:/i.test(b.src)?(e=j(b.src),d(e)):/^blob\:/i.test(b.src)?(f=new FileReader,f.onload=function(a){d(a.target.result)},k(b.src,function(a){f.readAsArrayBuffer(a)})):(g=new XMLHttpRequest,g.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";d(g.response),g=null},g.open("GET",b.src,!0),g.responseType="arraybuffer",g.send(null)):window.FileReader&&(b instanceof window.Blob||b instanceof window.File)&&(f=new FileReader,f.onload=function(b){a&&console.log("Got file of length "+b.target.result.byteLength),d(b.target.result)},f.readAsArrayBuffer(b))}function m(b){var f,d,e,c=new DataView(b);if(a&&console.log("Got file of length "+b.byteLength),255!=c.getUint8(0)||216!=c.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(d=2,e=b.byteLength;e>d;){if(255!=c.getUint8(d))return a&&console.log("Not a valid marker at offset "+d+", found: "+c.getUint8(d)),!1;if(f=c.getUint8(d+1),a&&console.log(f),225==f)return a&&console.log("Found 0xFFE1 marker"),u(c,d+4,c.getUint16(d+2)-2);d+=2+c.getUint16(d+2)}}function o(b){var d,e,f,g,h,i,c=new DataView(b);if(a&&console.log("Got file of length "+b.byteLength),255!=c.getUint8(0)||216!=c.getUint8(1))return a&&console.log("Not a valid JPEG"),!1;for(d=2,e=b.byteLength,f=function(a,b){return 56===a.getUint8(b)&&66===a.getUint8(b+1)&&73===a.getUint8(b+2)&&77===a.getUint8(b+3)&&4===a.getUint8(b+4)&&4===a.getUint8(b+5)};e>d;){if(f(c,d))return g=c.getUint8(d+7),0!==g%2&&(g+=1),0===g&&(g=4),h=d+8+g,i=c.getUint16(d+6+g),q(b,h,i);d++}}function q(a,b,c){for(var f,g,h,i,j,d=new DataView(a),e={},k=b;b+c>k;)28===d.getUint8(k)&&2===d.getUint8(k+1)&&(i=d.getUint8(k+2),i in p&&(h=d.getInt16(k+3),j=h+5,g=p[i],f=t(d,k+5,h),e.hasOwnProperty(g)?e[g]instanceof Array?e[g].push(f):e[g]=[e[g],f]:e[g]=f)),k++;return e}function r(b,c,d,e,f){var i,j,k,g=b.getUint16(d,!f),h={};for(k=0;g>k;k++)i=d+12*k+2,j=e[b.getUint16(i,!f)],!j&&a&&console.log("Unknown tag: "+b.getUint16(i,!f)),h[j]=s(b,i,c,d,f);return h}function s(a,b,c,d,e){var i,j,k,l,m,n,f=a.getUint16(b+2,!e),g=a.getUint32(b+4,!e),h=a.getUint32(b+8,!e)+c;switch(f){case 1:case 7:if(1==g)return a.getUint8(b+8,!e);for(i=g>4?h:b+8,j=[],l=0;g>l;l++)j[l]=a.getUint8(i+l);return j;case 2:return i=g>4?h:b+8,t(a,i,g-1);case 3:if(1==g)return a.getUint16(b+8,!e);for(i=g>2?h:b+8,j=[],l=0;g>l;l++)j[l]=a.getUint16(i+2*l,!e);return j;case 4:if(1==g)return a.getUint32(b+8,!e);for(j=[],l=0;g>l;l++)j[l]=a.getUint32(h+4*l,!e);return j;case 5:if(1==g)return m=a.getUint32(h,!e),n=a.getUint32(h+4,!e),k=new Number(m/n),k.numerator=m,k.denominator=n,k;for(j=[],l=0;g>l;l++)m=a.getUint32(h+8*l,!e),n=a.getUint32(h+4+8*l,!e),j[l]=new Number(m/n),j[l].numerator=m,j[l].denominator=n;return j;case 9:if(1==g)return a.getInt32(b+8,!e);for(j=[],l=0;g>l;l++)j[l]=a.getInt32(h+4*l,!e);return j;case 10:if(1==g)return a.getInt32(h,!e)/a.getInt32(h+4,!e);for(j=[],l=0;g>l;l++)j[l]=a.getInt32(h+8*l,!e)/a.getInt32(h+4+8*l,!e);return j}}function t(a,b,c){var d="";for(n=b;b+c>n;n++)d+=String.fromCharCode(a.getUint8(n));return d}function u(b,c){var h,i,j,k,l,m,n;if("Exif"!=t(b,c,4))return a&&console.log("Not valid EXIF data! "+t(b,c,4)),!1;if(m=c+6,18761==b.getUint16(m))h=!1;else{if(19789!=b.getUint16(m))return a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;h=!0}if(42!=b.getUint16(m+2,!h))return a&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(n=b.getUint32(m+4,!h),8>n)return a&&console.log("Not valid TIFF data! (First offset less than 8)",b.getUint32(m+4,!h)),!1;if(i=r(b,m,m+n,e,h),i.ExifIFDPointer){k=r(b,m,m+i.ExifIFDPointer,d,h);for(j in k){switch(j){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":k[j]=g[j][k[j]];break;case"ExifVersion":case"FlashpixVersion":k[j]=String.fromCharCode(k[j][0],k[j][1],k[j][2],k[j][3]);break;case"ComponentsConfiguration":k[j]=g.Components[k[j][0]]+g.Components[k[j][1]]+g.Components[k[j][2]]+g.Components[k[j][3]]}i[j]=k[j]}}if(i.GPSInfoIFDPointer){l=r(b,m,m+i.GPSInfoIFDPointer,f,h);for(j in l){switch(j){case"GPSVersionID":l[j]=l[j][0]+"."+l[j][1]+"."+l[j][2]+"."+l[j][3]}i[j]=l[j]}}return i}var d,e,f,g,p,a=!1,b=this,c=function(a){return a instanceof c?a:this instanceof c?(this.EXIFwrapped=a,void 0):new c(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.EXIF=c):b.EXIF=c,d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},p={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},c.getData=function(a,b){return(a instanceof Image||a instanceof HTMLImageElement)&&!a.complete?!1:(i(a)?b&&b.call(a):l(a,b),!0)},c.getTag=function(a,b){return i(a)?a.exifdata[b]:void 0},c.getAllTags=function(a){if(!i(a))return{};var b,c=a.exifdata,d={};for(b in c)c.hasOwnProperty(b)&&(d[b]=c[b]);return d},c.pretty=function(a){if(!i(a))return"";var b,c=a.exifdata,d="";for(b in c)c.hasOwnProperty(b)&&(d+="object"==typeof c[b]?c[b]instanceof Number?b+" : "+c[b]+" ["+c[b].numerator+"/"+c[b].denominator+"]\r\n":b+" : ["+c[b].length+" values]\r\n":b+" : "+c[b]+"\r\n");return d},c.readFromBinaryFile=function(a){return m(a)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return c})}.call(this);


/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */
!function(){function a(a){var d,e,b=a.naturalWidth,c=a.naturalHeight;return b*c>1048576?(d=document.createElement("canvas"),d.width=d.height=1,e=d.getContext("2d"),e.drawImage(a,-b+1,0),0===e.getImageData(0,0,1,1).data[3]):!1}function b(a,b,c){var e,f,g,h,i,j,k,d=document.createElement("canvas");for(d.width=1,d.height=c,e=d.getContext("2d"),e.drawImage(a,0,0),f=e.getImageData(0,0,1,c).data,g=0,h=c,i=c;i>g;)j=f[4*(i-1)+3],0===j?h=i:g=i,i=h+g>>1;return k=i/c,0===k?1:k}function c(a,b,c){var e=document.createElement("canvas");return d(a,e,b,c),e.toDataURL("image/jpeg",b.quality||.8)}function d(c,d,f,g){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,h=c.naturalWidth,i=c.naturalHeight;if(h+i){for(j=f.width,k=f.height,l=d.getContext("2d"),l.save(),e(d,l,j,k,f.orientation),m=a(c),m&&(h/=2,i/=2),n=1024,o=document.createElement("canvas"),o.width=o.height=n,p=o.getContext("2d"),q=g?b(c,h,i):1,r=Math.ceil(n*j/h),s=Math.ceil(n*k/i/q),t=0,u=0;i>t;){for(v=0,w=0;h>v;)p.clearRect(0,0,n,n),p.drawImage(c,-v,-t),l.drawImage(o,0,0,n,n,w,u,r,s),v+=n,w+=r;t+=n,u+=s}l.restore(),o=p=null}}function e(a,b,c,d,e){switch(e){case 5:case 6:case 7:case 8:a.width=d,a.height=c;break;default:a.width=c,a.height=d}switch(e){case 2:b.translate(c,0),b.scale(-1,1);break;case 3:b.translate(c,d),b.rotate(Math.PI);break;case 4:b.translate(0,d),b.scale(1,-1);break;case 5:b.rotate(.5*Math.PI),b.scale(1,-1);break;case 6:b.rotate(.5*Math.PI),b.translate(0,-d);break;case 7:b.rotate(.5*Math.PI),b.translate(c,-d),b.scale(-1,1);break;case 8:b.rotate(-.5*Math.PI),b.translate(-c,0)}}function g(a){var b,c;if(window.Blob&&a instanceof Blob){if(!f)throw Error("No createObjectURL function found to create blob url");b=new Image,b.src=f.createObjectURL(a),this.blob=a,a=b}a.naturalWidth||a.naturalHeight||(c=this,a.onload=a.onerror=function(){var b,d,a=c.imageLoadListeners;if(a)for(c.imageLoadListeners=null,b=0,d=a.length;d>b;b++)a[b]()},this.imageLoadListeners=[]),this.srcImage=a}var f=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;g.prototype.render=function(a,b,e){var g,h,i,j,k,l,m,n,o,p,q;if(this.imageLoadListeners)return g=this,this.imageLoadListeners.push(function(){g.render(a,b,e)}),void 0;b=b||{},h=this.srcImage.naturalWidth,i=this.srcImage.naturalHeight,j=b.width,k=b.height,l=b.maxWidth,m=b.maxHeight,n=!this.blob||"image/jpeg"===this.blob.type,j&&!k?k=i*j/h<<0:k&&!j?j=h*k/i<<0:(j=h,k=i),l&&j>l&&(j=l,k=i*j/h<<0),m&&k>m&&(k=m,j=h*k/i<<0),o={width:j,height:k};for(p in b)o[p]=b[p];q=a.tagName.toLowerCase(),"img"===q?a.src=c(this.srcImage,o,n):"canvas"===q&&d(this.srcImage,a,o,n),"function"==typeof this.onrender&&this.onrender(a),e&&e(),this.blob&&(this.blob=null,f.revokeObjectURL(this.srcImage.src))},"function"==typeof define&&define.amd?define([],function(){return g}):"object"==typeof exports?module.exports=g:this.MegaPixImage=g}();